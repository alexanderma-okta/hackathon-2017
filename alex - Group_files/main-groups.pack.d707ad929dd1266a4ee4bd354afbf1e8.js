var initCourageApp=webpackJsonpinitCourageApp([10],{0:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var s=n(448),r=i(s);e.exports=function(e){new r.default(e).start()}},89:function(e,t,n){var i,s;i=[n(2),n(90)],s=function(e,t){function n(e){return i.contains(["active_directory","ldap_sun_one"],e)}var i=e._,s="/api/v1/apps",r=e.tpl("/admin/app/{{name}}/instance/{{id}}"),a=e.Model.extend({flat:!1,props:{id:"string",name:"string",label:"string",status:"string",lastUpdated:"string",created:"string",accessibility:"object",licensing:"object",visibility:"object",features:"array",signOnMode:"string",credentials:"object",settings:"object",profile:"object",_links:"object",_embedded:"object"},local:{__selected__:"boolean",__sortOrder__:"number"},derived:{__logoUrl__:{deps:["_links"],fn:function(e){var t=e?e.logo:[],n=i.first(t);return n&&n.href?n.href:null}},__activateUrl__:{deps:["_links"],fn:function(e){return e&&e.activate&&e.activate.href||null}},__deactivateUrl__:{deps:["_links"],fn:function(e){return e&&e.deactivate&&e.deactivate.href||null}},__embedLink__:{deps:["_links","visibility"],fn:function(e,t){var n=t&&t.appLinks&&t.appLinks.login||!1,s=n&&e&&e.appLinks||[],r=i.first(i.where(s,{name:"login"}));return r&&r.href||null}},__scheme__:{deps:["credentials"],fn:function(e){return e?e.scheme:null}},__configUrl__:{deps:["id","name"],fn:function(e,t){return r({name:t,id:e})}},__active__:{deps:["status"],fn:function(e){return"ACTIVE"===e}},__provisionEnabled__:{deps:["features"],fn:function(e){return i.contains(e,"IMPORT_NEW_USERS")}},__createUserEnabled__:{deps:["features"],fn:function(e){return i.contains(e,"PUSH_NEW_USERS")}},__updateUserAttributesEnabled__:{deps:["features"],fn:function(e){return i.contains(e,"PUSH_PROFILE_UPDATES")}},__isDirectoryApp__:{deps:["name"],fn:n},__selfServiceEnabled__:{deps:["accessibility"],fn:function(e){return e&&e.selfService}},__isOmmWifi__:{deps:["settings"],fn:function(e){return e&&"omm_wifi"==e.name}},__rogueReportWithoutCsvUpload__:{deps:["features"],fn:function(e){return i.contains(e,"ROGUE_REPORT_WITHOUT_CSV_UPLOAD")}}},urlRoot:s,constructor:function(n){this.embedded={},this.embedded.appUser=new t.Model(this._getAppUserAttrs(n),{parse:!0}),e.Model.apply(this,arguments)},parse:function(e){return this.embedded.appUser.set(this.embedded.appUser.parse(this._getAppUserAttrs(e))),e},_getAppUserAttrs:function(e){e=e||{};var t=e._embedded||{};return i.extend({__instanceId__:e.id},t.user)},isSupportDiffReport:function(e){var t=!(!e||!i.isFunction(e.hasFeature))&&e.hasFeature("APP_ASSIGNMENT_DIFF_REPORT");return i.every([t,this.get("__provisionEnabled__"),this.get("__active__"),!this.get("__isDirectoryApp__")])}}),o=e.Collection.extend({model:a,url:s});return{isDirectoryApp:n,Model:a,Collection:o}}.apply(t,i),!(void 0!==s&&(e.exports=s))},90:function(e,t,n){var i,s;i=[n(2),n(91),n(92)],s=function(e,t,n){var i=e._,s=e.internal.util.Util.getUrlQueryString,r=e.tpl("/api/v1/apps/{{instanceId}}/users{{{urlQuery}}}"),a={APPROVED:e.loc("appinstance.assignments.people.approval.notProvisioned","messages"),REVOKED:e.loc("appinstance.assignments.people.approval.revoked","messages")},o=e.Model.extend({extraProperties:/^_(links|embedded)/,flat:!1,props:{id:"string",externalId:"string",created:"string",lastUpdated:"string",scope:"string",status:"string",statusChanged:"string",passwordChanged:"string",syncState:"string",lastSync:"string",credentials:"object",profile:"object"},local:{__isNew__:{type:"boolean",value:!0},__instanceId__:"string"},derived:{userName:{deps:["credentials"],fn:function(e){return e&&e.userName}},groupManaged:{deps:["scope"],fn:function(e){return"GROUP"===e}},groupId:{deps:["_links"],fn:function(e){return e&&e.group&&i.isString(e.group.href)?e.group.href.split("/").pop():null}},groupName:{deps:["_links"],fn:function(e){return e&&e.group&&e.group.name}},__metadata__:{deps:["_embedded"],fn:function(e){return e&&i.isArray(e.metadata)?e.metadata:[]}},__oktaUser__:{deps:["_embedded"],fn:function(e){return e&&e.user||{}}},__oktaStatus__:{deps:["__oktaUser__"],fn:function(e){return e&&e.status}},__oktaStatusLabel__:{deps:["__oktaStatus__"],fn:function(e){return n.getLabel(e)}},__oktaFirstName__:{deps:["__oktaUser__"],fn:function(e){return e&&e.profile&&e.profile.firstName}},__oktaLastName__:{deps:["__oktaUser__"],fn:function(e){return e&&e.profile&&e.profile.lastName}},__oktaUserName__:{deps:["__oktaUser__"],fn:function(e){return e&&e.profile&&e.profile.login}},__displayUserName__:{deps:["__oktaUserName__","__oktaFirstName__","__oktaLastName__","userName"],fn:function(e,t,n,i){return t&&n?t+" "+n:e?e:i}},__highlightStatusLabel__:{deps:["status"],fn:function(e){return a[e]}},__appAssignmentTask__:{deps:["_embedded"],fn:function(e){return e?e.task:null}},__hasTaskError__:{deps:["__appAssignmentTask__"],fn:function(e){return Boolean(e&&"COMPLETED"!==e.status&&e.errorString)}}},parse:function(t){t.credentials||(t.credentials={}),this.profile&&(this.profile.set("userName",t.credentials.userName),this.profile.set(t.profile));var n=t._links;return n&&n.app&&i.isString(n.app.href)&&(t.__instanceId__=n.app.href.split("/").pop()),t.__isNew__=!1,e.Model.prototype.parse.apply(this,arguments)},constructor:function(t){t||(t={}),t.credentials||(t.credentials={}),this.profile=new e.BaseModel,e.Model.apply(this,arguments)},initialize:function(e,t){if(e||(e={}),t||(t={}),this.set("__instanceId__",e.__instanceId__||t.__instanceId__),!this.get("__instanceId__"))throw"Cannot initialize AppUser without an instance id"},urlRoot:function(){return r({instanceId:this.get("__instanceId__")})},isNew:function(){return this.get("__isNew__")},sync:function(t,n,i){return"update"===t&&(i.method="POST"),e.Model.prototype.sync.call(this,t,n,i)}}),l=e.Collection.extend({model:o,initialize:function(e,n){if(n||(n={}),this.__instanceId__=n.__instanceId__,!this.__instanceId__)throw"Cannot initialize AppUsers without an instance id";this.expander=new t(n.expand)},url:function(){return r({instanceId:this.__instanceId__,urlQuery:s({expand:this.expander.toString()||void 0})})}});return{Model:o,Collection:l,EXPAND:{TASK:"task",USER:"user",METADATA:"metadata"}}}.apply(t,i),!(void 0!==s&&(e.exports=s))},91:function(e,t,n){var i,s;i=[n(2)],s=function(e){var t=e._,n=function(e){this.expand={},this.add(e)};return t.extend(n.prototype,{add:function(e){return t.isArray(e)?t.each(e,function(e){this.expand[e]=!0},this):e&&(this.expand[e]=!0),this},toString:function(){return t.isEmpty(this.expand)?"":t.keys(this.expand).join(",")}}),n}.apply(t,i),!(void 0!==s&&(e.exports=s))},92:function(e,t,n){var i,s;i=[n(2)],s=function(e){var t={STAGED:"appinstance.userassignment.user.status.staged",ACTIVE:"appinstance.userassignment.user.status.active",RECOVERY:"appinstance.userassignment.user.status.recovery",PROVISIONED:"appinstance.userassignment.user.status.provisioned",DEPROVISIONED:"appinstance.userassignment.user.status.deprovisioned",LOCKED_OUT:"appinstance.userassignment.user.status.lockedout",PASSWORD_EXPIRED:"appinstance.userassignment.user.status.passwordexpired",SUSPENDED:"appinstance.userassignment.user.status.suspended"};return{getLabel:function(n,i){if(!e._.isString(n))return"";var s=t[n.toUpperCase()];return s?e.loc(s,i||"messages"):""}}}.apply(t,i),!(void 0!==s&&(e.exports=s))},100:function(e,t,n){var i,s;i=[n(2),n(101)],s=function(e,t){function n(e){return s.contains(["admin","user","approvalflow","imported"],e)}function i(e){return s.isUndefined(e)||s.isNull(e)||s.isArray(e)&&s.isEmpty(e)||s.isString(e)&&""===e?null:e}var s=e._,r=e.Model.extend({props:{id:"string",sourceType:"string",sourceGroup:"object",pushStatus:"string",sourceExpression:"string",targetPreviewValue:"object",targetProfileValue:"object",schemaPropertyDisplayType:"string",schemaPropertyMutability:"string"},local:{__isOverrideToDefault__:["boolean",!1,!1]},derived:{__isCustom__:{deps:["sourceType"],fn:n},__isGroupSourceType__:{deps:["sourceType"],fn:function(e){return"group"===e}},__isDefault__:{deps:["sourceType"],fn:function(e){return"default"===e}},__isWritable__:{deps:["schemaPropertyMutability"],fn:function(e){return"READ_WRITE"===e}},__defaultValue__:{deps:["__isCustom__","targetPreviewValue","targetProfileValue"],fn:function(e,t,n){return e?t:n}},__isCreateOnly__:{deps:["pushStatus"],fn:function(e){return"DONT_PUSH"===e}},__isCreateAndUpdate__:{deps:["pushStatus"],fn:function(e){return"PUSH"===e}},__cleanPreviewValue__:{deps:["targetPreviewValue"],fn:function(e){return i(e)}},__cleanProfileValue__:{deps:["targetProfileValue"],fn:function(e){return i(e)}},__isPreviewSameAsProfile__:{deps:["__cleanPreviewValue__","__cleanProfileValue__"],fn:t.isEqual},__reapplyMapping__:{deps:["__isDefault__","__isWritable__","__isPreviewSameAsProfile__","__isCreateOnly__"],fn:function(e,t,n,i){return e&&t&&!n&&!i}},__driftDefaultValue__:{deps:["__isDefault__","__isPreviewSameAsProfile__","__isCreateOnly__"],fn:function(e,t,n){return e&&!t&&n}}},setSourceTypeAdmin:function(){this.set("sourceType","admin")},setSourceTypeDefault:function(){this.set("sourceType","default")},setOverrideToDefault:function(){this.set("__isOverrideToDefault__",!0)},clearOverrideToDefault:function(){this.set("__isOverrideToDefault__",!1)}}),a=e.Collection.extend({model:r});return{Model:r,Collection:a}}.apply(t,i),!(void 0!==s&&(e.exports=s))},101:function(e,t,n){var i,s;i=[n(2)],s=function(e){function t(e){return s.countBy(e,s.identity)}function n(e,n){return s.isArray(e)&&s.isArray(n)?e.length===n.length&&s.isEqual(t(e),t(n)):s.isEqual(e,n)}function i(e){return s.isUndefined(e)||s.isNull(e)||s.isArray(e)?s.isEmpty(e):""===e}var s=e._;return{isEqual:n,isEmptyValue:i}}.apply(t,i),!(void 0!==s&&(e.exports=s))},102:function(e,t,n){var i,s;i=[n(2),n(103)],s=function(e,t){return e.internal.views.forms.BaseInput.extend({initialize:function(){this.formInput=this.options.params.input,this.entitlementModel=this.options.params.entitlementModel},editMode:function(){this.options.params.input.readOnly=this.options.readOnly,this.editModeView(),this.renderView()},readMode:function(){this.options.params.input.readOnly=!0,this.readModeView(),this.renderView()},editModeView:function(){this.inputView=new t(this.options)},readModeView:function(){this.inputView=new t(this.options)},renderView:function(){this.$el.html(this.inputView.render().el)},focus:function(){this.inputView&&this.inputView.focus()}})}.apply(t,i),!(void 0!==s&&(e.exports=s))},103:function(e,t,n){var i,s;i=[n(2)],s=function(e){var t=e._,n=e.internal.views.forms.helpers.InputFactory;return e.View.extend({className:"entitlement-group",attributes:function(){return{"data-se":"entitlement-"+this.options.params.entitlementModel.get("id")}},initialize:function(){this.entitlementModel=this.options.params.entitlementModel,this.formInput=this.options.params.input;var e=t.defaults({model:this.model,params:t.extend({},{autoWidth:!0},this.formInput.params||{})},this.formInput);this.add(n.create(e))},focus:function(){this.first()&&this.first().focus()}})}.apply(t,i),!(void 0!==s&&(e.exports=s))},104:function(e,t,n){var i,s;i=[n(102)],s=function(e){return e.extend({readMode:function(){this.model.set(this.formInput.name,this.entitlementModel.get("targetProfileValue")),e.prototype.readMode.apply(this,arguments)}})}.apply(t,i),!(void 0!==s&&(e.exports=s))},105:function(e,t,n){var i,s;i=[n(104),n(106),n(107)],s=function(e,t,n){return e.extend({editModeView:function(){"select"===this.formInput.type?this.inputView=new n(this.options):this.inputView=new t(this.options)}})}.apply(t,i),!(void 0!==s&&(e.exports=s))},106:function(e,t,n){var i,s;i=[n(2),n(101),n(103)],s=function(e,t,n){var i=e._,s=e.View.extend({events:{"click a":"resetClick"},template:'<div class="override-reset">{{i18n code="appinstance.assignments.overrides.default.value.text"}}<a class="override-reset-link"><span class="icon-16 icon-only factory-reset-16"></span> {{i18n code="appinstance.assignments.overrides.reset.link"}}</a></div>',resetClick:function(){this.options.entitlementModel.trigger("resetClicked")}});return n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.overrideResetCheck(),this.overrideResetCheck=i.debounce(this.overrideResetCheck,100),this.listenTo(this.model,"change:"+this.formInput.name,this.overrideResetCheck),this.listenTo(this.entitlementModel,"resetClicked",this.handleResetClick)},handleResetClick:function(){this.model.set(this.formInput.name,this.entitlementModel.get("targetPreviewValue"),{silent:!0}),this.entitlementModel.setOverrideToDefault(),this.hideReset(),this.render()},isSameValues:function(){var e=this.entitlementModel.get("targetPreviewValue"),n=this.model.get(this.formInput.name),i=t.isEmptyValue(e),s=t.isEmptyValue(n);return i&&s||t.isEqual(e,n)},overrideResetCheck:function(){var e=this.isSameValues();e?this.hideReset():this.showReset()},showReset:function(){if(!this.resetView){var e=new s({entitlementModel:this.entitlementModel});this.resetView=this.add(e).last(),this.entitlementModel.clearOverrideToDefault()}},hideReset:function(){this.resetView&&this.resetView.remove(),this.resetView=null}})}.apply(t,i),!(void 0!==s&&(e.exports=s))},107:function(e,t,n){var i,s;i=[n(2),n(101),n(106)],s=function(e,t,n){var i=e._;return n.extend({defaultOption:null,initialize:function(){this._appendDefaultOption(),n.prototype.initialize.apply(this,arguments)},isSameValues:function(){var e=this.$el.find("select option:selected").index(),n=0===e&&!i.isNull(this.defaultOption);n&&this.model.set(this.formInput.name,null,{silent:!0});var s=this.entitlementModel.get("targetPreviewValue"),r=this.model.get(this.formInput.name),a=t.isEmptyValue(s),o=t.isEmptyValue(r);return a&&o||s===r||n},_appendDefaultOption:function(){var n=this.options.params.entitlementModel.get("sourceExpression"),s=this.options.params.entitlementModel.get("targetPreviewValue");t.isEmptyValue(n)&&t.isEmptyValue(s)?this.defaultOption=e.loc("appinstance.assignments.select.notMapped"):t.isEmptyValue(n)||n!==s||(this.defaultOption=n),this.defaultOption&&(this.options.params.input.options=i.extend({"":this.defaultOption},this.options.params.input.options))}})}.apply(t,i),!(void 0!==s&&(e.exports=s))},111:function(e,t,n){var i,s;i=[n(2),n(112),n(115),n(117),n(100),n(118),n(119)],s=function(e,t,n,i,s,r,a){function o(e,t){var n,i=r.toFixedValue(t.sourceExpression),s=e[t.targetField];return s&&(i=a.normalizeValue(s.get("type"),i)),n=b.isUndefined(i)?t.sourceExpression:i,b.extend({},t,{value:n})}function l(){return v?I.Deferred().resolve():(v=new t.Model({id:"default"}),v.fetch())}function u(e){var t;return t=y&&y.get("target")===e?I.Deferred().resolve():function(){var t={source:v.get("id"),target:e};return y=new n.Model,y.fetch({data:t})},l().then(t).then(function(){return{oktaUserProfile:v,oktaToAppMapping:y}})}function p(e){var t=e.get("name"),n=e.get("type"),i=e.get("mutability");return{name:t,source:[{type:"DEFAULT"}],schemaPropertyDisplayType:n,schemaPropertyMutability:i}}function d(e,t){if(b.isEmpty(t))return b.mapObject(e,p);var n=[];b.each(t,function(t){var i=e[t.name];i&&n.push(b.extend({},t,{schemaPropertyDisplayType:i.get("type"),schemaPropertyMutability:i.get("mutability")}))});var i=b.map(n,b.property("name")),s=b.keys(e),r=b.difference(s,i),a=r.length>=1?b.chain(r).map(b.propertyOf(e)).map(p).value():[];return b.union(n,a)}function c(e){var t=b.isArray(e)&&e.length>=1?b.head(e):{},n=b.isString(t.type)?t.type:"ADMIN";return n.toLowerCase()}function f(e){return b.isArray(e)&&0!==e.length?b.chain(e).filter(function(e){return b.isString(e.type)&&"GROUP"===e.type}).map(function(e){return e.id}).value():[]}function h(e,t,n){n||(n={});var i=b.map(t,function(t){var i={id:t.name,sourceType:c(t.source),sourceGroup:f(t.source),schemaPropertyDisplayType:t.schemaPropertyDisplayType,schemaPropertyMutability:t.schemaPropertyMutability},s=b.findWhere(e,{targetField:t.name});return i.targetProfileValue=n[t.name],s&&b.extend(i,{sourceExpression:s.sourceExpression,targetPreviewValue:s.value,pushStatus:s.pushStatus}),i});return new s.Collection(i)}function _(e,t){var n=e.get("id"),i=e.get("properties"),s=i.pluck("name"),r=b.object(s,i.models);return u(n).then(function(e){var n=e.oktaToAppMapping.get("propertyMappings").toJSON(),i=t.toJSON().profile,s=t.get("_embedded.metadata");return s=d(r,s),n=b.map(n,b.partial(o,r)),h(n,s,i)})}function g(e){var t=e.oktaToAppMapping.get("propertyMappings").toJSON(),n=e.appUserProfile.get("id"),s=new i({userId:e.appUserProfile.get("userId")});return e.previewMapping=s,s.set({sourceId:e.oktaUserProfile.get("id"),targetId:n,propertyMappings:t}),s.save().then(b.constant(e))}function m(e,t){var n=e.get("id"),i=e.get("properties"),s=i.pluck("name"),r=b.object(s,i.models);return u(n).then(function(t){return b.extend({},t,{appUserProfile:e})}).then(g).then(function(e){var n=e.previewMapping.get("propertyMappings"),i=t.toJSON().profile,s=t.get("__metadata__");return s=d(r,s),h(n,s,i)})}var v,y,b=e._,I=e.$;return{createGAAEntitlementMeta:_,createAAEntitlementMeta:m}}.apply(t,i),!(void 0!==s&&(e.exports=s))},112:function(e,t,n){var i,s;i=[n(2),n(113),n(89),n(114)],s=function(e,t,n,i){var s=e.tpl,r=e._,a=e.internal.util.Util.getUrlQueryString,o=s("/api/v1/user/types/{{id}}{{{urlQuery}}}"),l=s("/api/v1/user/types{{{urlQuery}}}"),u=t.Model.extend({defaults:r.extend({},t.Model.prototype.defaults,{__appType__:"user",__profileMasters__:function(){var e=new n.Collection;return this.get("_embedded")&&this.get("_embedded").profileMasters&&r.each(this.get("_embedded").profileMasters,function(t){e.add(t,{parse:!0})}),e},__appLogoUrl__:i.OKTA_DEFAULT_LOGO_RESOURCE,__appInstanceDisplayName__:e.loc("okta")}),url:function(){return o({id:this.get("id"),urlQuery:a({expand:this.get("expandQuery")||void 0,userId:this.get("userId")})})}}),p=t.Collection.extend({model:u,url:function(){return l({urlQuery:a({expand:this.expander.toString()||void 0})})},updateDefault:function(e){var t=this.where({isDefault:!0});r.each(t,function(t){t.id!=e.id&&t.set({isDefault:!1})})}});return{Model:u,Collection:p}}.apply(t,i),!(void 0!==s&&(e.exports=s))},113:function(e,t,n){var i,s;i=[n(2),n(91)],s=function(e,t){var n=e._,i=e.BaseModel,s=e.internal.models.BaseSchema,r=e.internal.models.SchemaProperty,a=i.extend({defaults:{id:void 0,displayName:void 0,name:void 0,expandQuery:function(){return this.expander.toString()},properties:i.ComputedProperty(["_embedded"],function(e){var t,i=new r.Collection;return e&&e.schemas&&(t=n.reduce(e.schemas,function(e,t){return e.concat(s.parseProperties(t))},[]),i.reset(t,{silent:!0,parse:!0})),i})},initialize:function(e,n){n||(n={}),this.instanceId=n.instanceId,this.expander=new t(n.expand)},generateSelectOptions:function(){return this.get("properties").map(function(e){var t=e.toJSON();return t.type="image"===e.get("type")?"image":t.type,n.extend({id:e.get("name"),text:e.get("name")},t)})}}),o=e.Collection.extend({model:a,initialize:function(e,n){n||(n={}),this.expander=new t(n.expand)}});return{Model:a,Collection:o}}.apply(t,i),!(void 0!==s&&(e.exports=s))},114:function(e,t,n){var i,s;i=[n(2)],s=function(e){return{OKTA_DEFAULT_LOGO_RESOURCE:"/img/logos/okta-logo.png",APP_DEFAULT_LOGO_RESOURCE:"/img/logos/default.png",DOCUMENTATION:"https://help.okta.com/en/prod/Content/Topics/Directory/About_Universal_Directory.htm",INTRO_VIDEO:"http://youtu.be/PBCV2PxIvnc",getAppConfigResource:function(t,n,i){return t&&n?e.tpl("/admin/app/{{name}}/instance/{{id}}/{{#if tab}}#{{tab}}{{/if}}")({name:t,id:n,tab:i}):""}}}.apply(t,i),!(void 0!==s&&(e.exports=s))},115:function(e,t,n){var i,s;i=[n(2),n(116)],s=function(e,t){var n=function(e){return!!/get(Manager|Assistant)(App)*User(?=\()/.test(e)},i=e.BaseModel,s=e._,r=i.extend({defaults:{targetField:void 0,sourceExpression:"",pushStatus:"",__targetAttribute__:void 0},initialize:function(){this.listenTo(this,"updatePushStatus",function(e,n){""===this.get("sourceExpression")?this.set("pushStatus",null):this.get("pushStatus")||("appToOkta"===e?this.set("pushStatus",s.contains(n,"PROFILE_MASTERING")?t.PUSH:t.DONT_PUSH):this.set("pushStatus",s.contains(n,"PUSH_PROFILE_UPDATES")?t.PUSH:t.DONT_PUSH))})}}),a=e.Collection.extend({model:r,toJSON:function(){var t=e.Collection.prototype.toJSON.apply(this,arguments);return s.filter(t,function(e){return e.pushStatus&&e.sourceExpression})}}),o=i.extend({defaults:{sourceId:void 0,targetId:void 0,propertyMappings:new a},url:"/api/internal/v1/mappings",parse:function(e){return s.isArray(e)?(e[0].propertyMappings=new a(e[0].propertyMappings||[]),e[0]):(e.propertyMappings=new a(e.propertyMappings||[]),e)},sync:function(e,t,n){return"create"===e&&(n.method="PUT"),i.prototype.sync.call(this,e,t,n)},toJSON:function(){var e=i.prototype.toJSON.apply(this,arguments);return e.propertyMappings=s.isArray(e.propertyMappings)?e.propertyMappings:e.propertyMappings.toJSON(),e},isSynced:function(){var e=this._getSynced(),t=this.toJSON();return!(!e||!t||e.sourceId!==t.sourceId||e.targetId!==t.targetId)&&(e.propertyMappings.length===t.propertyMappings.length&&(s.each(e.propertyMappings,function(e){var n=s.findWhere(t.propertyMappings,e);void 0!==n&&(t.propertyMappings=s.without(t.propertyMappings,n))}),0===t.propertyMappings.length))},hasManagerAssistantInMapping:function(){for(var e=this.toJSON().propertyMappings,t=!1,i=e.length,s=0;!t&&s<i;)t=n(e[s].sourceExpression),s++;return t}});return{Model:o,ProfileMappingModel:r,ProfileMappingCollection:a}}.apply(t,i),!(void 0!==s&&(e.exports=s))},116:function(e,t,n){!(e.exports={PUSH:"PUSH",DONT_PUSH:"DONT_PUSH",getIconClass:function(e){var t="mapping-rule-icon",n="";switch(e){case this.PUSH:n="mapping-rule-create-update";break;case this.DONT_PUSH:n="mapping-rule-create-only";break;default:n="mapping-rule-not-mapped"}return t+" "+n},getDropDownWrapperClass:function(e){switch(e){case this.PUSH:return"mapping-rule-create-update-dropdown";case this.DONT_PUSH:return"mapping-rule-create-only-dropdown";default:return"mapping-rule-not-mapped-dropdown"}}})},117:function(e,t,n){var i,s;i=[n(2)],s=function(e){var t=e.internal.util.SchemaUtil,n=function(e){return t.DATATYPE[e]||e},i=e.tpl("/api/internal/v1/mappings/preview?includeAllTargetFields={{includeAllTargetFields}}"),s=e._;return e.Model.extend({url:function(){return i(this.pick("includeAllTargetFields"))},props:{sourceId:{type:"string",required:!0},targetId:{type:"string",required:!0},userId:{type:"string",required:!0},propertyMappings:{type:"array",required:!0}},local:{includeAllTargetFields:{type:"boolean",value:!0}},parse:function(e){return s.each(e.propertyMappings,function(e){e.sourceExpression&&(e.__displaySourceType__=t.getDisplayType(e.sourceExpressionType,e.sourceExpressionFormat,e.sourceExpressionItems?e.sourceExpressionItems.type:void 0,"fx"),"object"===e.sourceExpressionType&&"image"===e.sourceExpressionExtendedType&&(e.__displaySourceType__="image"),e.__displaySourceTypeLabel__=n(e.__displaySourceType__));var i=e.targetFieldType;i&&(e.__displayTargetType__=t.getDisplayType(i,e.targetFieldFormat,e.targetFieldItems?e.targetFieldItems.type:void 0),"object"===e.targetFieldType&&"image"===e.targetFieldExtendedType&&(e.__displayTargetType__="image"),e.__displayTargetTypeLabel__=n(e.__displayTargetType__)),e.__displayValue__=this._getDisplayValue(e.value)},this),e},_getDisplayValue:function(e){return s.isUndefined(e)&&(e=null),JSON.stringify(e).replace(/\\\\/g,"\\")}})}.apply(t,i),!(void 0!==s&&(e.exports=s))},118:function(e,t,n){var i,s;i=[n(2)],s=function(e){function t(e){return e===_}function n(e){return"'"===e}function i(e){return'"'===e}function s(e){return m.test(e)}function r(e,t){if(!f.isFunction(e)||f.isEmpty(t))return[];var n=f.head(t);return e(n)?[n].concat(r(e,f.rest(t))):[]}function a(e,t){return f.isString(t)&&!f.isEmpty(t)&&f.every(t,s)?e+_+t:""}function o(e){if(f.isString(e)){var n=r(f.negate(t),e).join(""),i=r(s,e.replace(n+_,"")).join(""),a=e.replace(n+_+i,"");return f.contains(b,n)&&0===a.length?i:void 0}}function l(e){return Number(e)}function u(e){return a(y,e)}function p(e){return a(v,e)}function d(e){return f.isString(e)&&(e=h.trim(e)),void 0===e||""===e||f.isArray(e)&&0===e.length?"":f.isArray(e)?"{"+f.map(e,d).join(g)+"}":JSON.stringify(e)}function c(e,t){if(f.isString(e)){var s,r=h.trim(e),a=r.length,o=[f.head(r),f.last(r)],u=r.substring(1,a-1),p=f.isNumber(l(r));if("number"===t&&p)return l(r);if(0!==u.length)return f.every(o,i)||f.every(o,n)?u:f.isEqual(o,["{","}"])?(t=t||i(f.head(u))||n(f.head(u))?"string":"number",s=f.chain(u.split(g)).map(function(e){return c(e,t)}).filter(f.isDefined).value(),s.length>0?s:void 0):void 0}}var f=e._,h=e.$,_=".",g=",",m=new RegExp("[a-zA-Z0-9_]"),v="user",y="appuser",b=[v,y];return{toAttribute:o,fromAppUserAttribute:u,fromOktaUserAttribute:p,toFixedValue:c,fromFixedValue:d}}.apply(t,i),!(void 0!==s&&(e.exports=s))},119:function(e,t,n){var i,s;i=[n(2)],s=function(e){var t=e._,n=function(e){return"true"===e||"false"!==e&&null},i=function(e,n){return"array"===e?t.isArray(n):"string"===e?t.isString(n):"boolean"===e?t.isBoolean(n)||t.isNull(n):("number"===e||"integer"===e)&&(t.isNumber(n)&&!t.isNaN(n))};return{normalizeValue:function(e,t){return"number"!==e&&"integer"!==e||(t=Number(t)),"boolean"===e&&(t=n(t)),i(e,t)?t:void 0}}}.apply(t,i),!(void 0!==s&&(e.exports=s))},120:function(e,t,n){var i,s;i=[n(2)],s=function(e){var t=e.tpl("/api/v1/internal/apps/{{__instanceId__}}/types");return e.BaseModel.extend({initialize:function(e){if(e||(e={}),!e.__instanceId__)throw"Cannot initialize AppUserCustomTypePossibleValues without an instance id"},url:function(){return t(this.toJSON({verbose:!0}))}})}.apply(t,i),!(void 0!==s&&(e.exports=s))},121:function(e,t,n){var i,s;i=[n(2)],s=function(e){var t=e.tpl("/api/v1/internal/apps/{{instanceId}}/userAssignmentHelpText");return e.Model.extend({props:{instanceId:"string",appName:"string",userAssignmentHelpTextSupported:"boolean",displayUserAssignmentHelpText:"boolean"},initialize:function(e){if(e||(e={}),!e.instanceId)throw"Cannot initialize UserAssignmentHelpText without an instance id";this.instanceId=e.instanceId},url:function(){return t({instanceId:this.instanceId})}})}.apply(t,i),!(void 0!==s&&(e.exports=s))},123:function(e,t,n){var i,s;i=[n(2)],s=function(e){var t=e._,n=e.internal.util.Util.constantError,i=20;return e.MultiViewModalDialog.extend({params:{containerId:"create-assignment-modal",minWidth:620,maxWidth:688,autoResize:!1,autoPosition:!0},height:535,datalistView:n("datalistView is an abstract variable"),getCollection:n("getCollection is an abstract method"),createAssignmentForm:n("createAssignmentForm is an abstract method"),constructor:function(t){this.options=t,this.collection=this.getCollection(),t.collection=this.collection,this.View=this.datalistView,e.MultiViewModalDialog.apply(this,arguments)},stateEvents:{assign:"handleAssignment","change:unassignedSearchQuery":"fetchCollection",doneAssignment:"remove"},initialize:function(){this.triggerCloseModalEvent=t.once(this.triggerCloseModalEvent),t.bindAll(this,"fetchCollection","updateCollection","handleAssignment","transitToFormView","transitToListView","handleAssignSuccessfully")},render:function(){e.MultiViewModalDialog.prototype.render.apply(this,arguments),this.fetchCollection()},fetchCollection:function(){return this.collection.fetch({data:{q:this.state.get("unassignedSearchQuery"),limit:i}})},updateCollection:function(){this.collection.trigger("itemAssigned",this.assignmentId)},handleAssignment:function(e){this.assignmentId=e,this.createAssignmentForm(e).then(this.transitToFormView)},transitToFormView:function(e){e&&(this.listenTo(e,"cancel",this.transitToListView),this.listenToOnce(e.model,"sync",this.handleAssignSuccessfully),this.switchView(e))},handleAssignSuccessfully:function(){this.transitToListView(),this.updateCollection()},transitToListView:function(){this.switchView(this.datalistView),this.collection.trigger("sync")},remove:function(){e.MultiViewModalDialog.prototype.remove.apply(this,arguments),this.triggerCloseModalEvent()},triggerCloseModalEvent:function(){this.state.trigger("closeModal")}})}.apply(t,i),!(void 0!==s&&(e.exports=s))},126:function(e,t,n){var i,s;i=[n(2)],s=function(e){var t=e.View.extend({className:"simplemodal-button-bar o-form-button-bar",template:'<input type="button" data-type="close" \t                      class="button button-primary js-done-button" \t                      value="{{i18n code="simplemodal.done"}}">',events:{"click .js-done-button":"doneAssignment"},doneAssignment:function(){this.state.trigger("doneAssignment")}});return e.DataList.extend({resizeSelector:".data-list-content-wrap",toolbar:[{type:"search",align:"left",minChars:1,field:"unassignedSearchQuery"}],collectionEvents:{sync:"balance",itemAssigned:"itemAssigned"},postRender:function(){this.add(t)},itemAssigned:function(e){var t=this.collection.findWhere({id:e});t&&t.set("__isAssigned__",!0)},balance:e._.debounce(function(){e.DataList.prototype.balance.apply(this,arguments),this.trigger("resize")},this.debounceTime)})}.apply(t,i),!(void 0!==s&&(e.exports=s))},128:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),r=n(129),a=i(r),o=n(130),l=i(o),u=n(133),p=i(u),d=n(111),c=i(d),f=n(134),h=i(f),_=n(120),g=i(_),m=n(121),v=i(m),y=n(123),b=i(y),I=s.internal.util.Util,M=s.internal.views.forms.helpers.SchemaFormFactory;t.default=b.default.extend({getDataForAssignment:I.constantError("getDataForAssignment is an abstract method"),createAssignmentForm:function(e){var t=this.getDataForAssignment(e),n=t.appInstanceId,i=t.groupId;return this._fetchSchemaData(n,i).then(s._.bind(this._createAssignmentOrForm,this))},_fetchSchemaData:function(e,t){var n=new h.default.Model({id:e}),i=new g.default({__instanceId__:e}),r=new v.default({instanceId:e});return s.$.when(n.fetch(),i.fetch(),r.fetch()).then(function(){return{schema:n,possibleValues:i,groupId:t,appInstanceId:e,userAssignmentHelpText:r}})},_createAssignmentOrForm:function(e){var t=e.schema.get("properties"),n=e.possibleValues.toJSON(),i=new a.default.Model({id:e.groupId,__instanceId__:e.appInstanceId});if(M.hasValidSchemaProps(t,n)){var r=M.prepareSchema(t,n,i);return this._createAppGroupForm(e,i,r)}return i.save().then(this.updateCollection).then(s._.constant(null))},_createAppGroupForm:function(e,t,n){var i=this,r=this.getDataForAssignment(this.assignmentId);if(this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY"))return c.default.createGAAEntitlementMeta(e.schema,t).then(function(s){return new l.default({entitlementAttributes:s,model:t,schemaProperties:n,state:i.state,settings:i.settings,appInstanceId:r.appInstanceId,appName:r.appName,title:null,userAssignmentHelpText:e.userAssignmentHelpText})});var a=new p.default({model:t,schemaProperties:n,state:this.state,settings:this.settings,title:null,userAssignmentHelpText:e.userAssignmentHelpText});return(new s.$.Deferred).resolve(a)}})},129:function(e,t,n){var i,s;i=[n(2),n(91)],s=function(e,t){var n=e._,i=e.$,s=e.internal.util.Util.getUrlQueryString,r=e.tpl("/api/v1/apps/{{instanceId}}/groups{{#if groupId}}/{{groupId}}{{/if}}{{#if params}}/?{{params}}{{/if}}{{#if urlQuery}}{{{urlQuery}}}{{/if}}"),a=e.BaseModel.extend({flat:!0,defaults:{__isNew__:!0},derived:{groupName:{deps:["_embedded.group.profile.name"],fn:function(e){return e||""}},groupDescription:{deps:["_embedded.group.profile.description"],fn:function(e){return e||""}},groupLogo:{deps:["_embedded.group._links.logo"],fn:function(e){return e&&e[0]&&e[0].href||""}}},url:function(){var e={},t=this.expander.toString();return n.isEmpty(t)||(e.expand=t),r({instanceId:this.options.__instanceId__,groupId:this.get("id"),params:i.param(e)})},initialize:function(e,n){if(e||(e={}),n||(n={}),!e.id)throw"Cannot initialize an AppGroup without an id (group id)";if(!e.__instanceId__)throw"Cannot initialize an AppGroup without an app instance id";this.__nestedProperty__="profile.",this.expander=new t(n.expand);
},parse:function(e){var t=e._links;return t&&t.app&&n.isString(t.app.href)&&(e.__instanceId__=t.app.href.split("/").pop()),e.__isNew__=!1,e},isNew:function(){return this.get("__isNew__")},sync:function(t,n,i){return"create"===t&&(i.method="PUT"),e.BaseModel.prototype.sync.call(this,t,n,i)}}),o=e.Collection.extend({model:a,comparator:"priority",initialize:function(e,n){if(n||(n={}),this.__instanceId__=n.__instanceId__,!this.__instanceId__)throw"Cannot initialize AppGroups without an instance id";this.expander=new t(n.expand)},url:function(){return r({instanceId:this.__instanceId__,urlQuery:s({expand:this.expander.toString()||void 0})})}});return{Model:a,Collection:o,EXPAND:{GROUP:"group",METADATA:"metadata"}}}.apply(t,i),!(void 0!==s&&(e.exports=s))},130:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),r=n(101),a=i(r),o=n(102),l=i(o),u=n(131),p=i(u),d=n(105),c=i(d),f=n(133),h=i(f),_=s.internal.views.forms.helpers.SchemaFormFactory,g=(0,s.tpl)('<div class="infobox clearfix infobox-info"><span class="icon info-16"></span><p>{{{gotoMappings}}}</p></div>');t.default=h.default.extend({autoSave:!1,initialize:function(){this.entitlementAttributes=this.options.entitlementAttributes,this.textInputs=[],this.listenTo(this,"save",this._saveAppGroup),h.default.prototype.initialize.apply(this,arguments)},addExtraHeaderInfo:function(){var e={gotoMappings:(0,s.loc)("group.appassignment.group.goto.mappings","messages",[this.options.appName,this.options.appInstanceId])};this.add(g(e))},addInputsForProperties:function(){var e=[];this.options.schemaProperties.each(function(t){var n=_.createInputOptions(t);return e.push(n.name),this.assignMappingAsDefault(t,n),this._unflattenObjectType(t,n.name),this.addInputForProperty(n,t),n},this),this.inputNames=e},addInputForProperty:function(e,t){var n="image"===t.get("type"),i=this._isTextInput(e.name),s=void 0;s=n?l.default:i?p.default:c.default;var r=this.options.entitlementAttributes.get(t.get("name")),a={input:s,readOnly:n,label:e.label,params:{input:e,entitlementModel:r}};this.addInput(a)},assignMappingAsDefault:function(e,t){if("image"!==e.get("type")){var n=t.name,i=n.replace(/^profile\./,""),r=this.model.get(n),a=this.entitlementAttributes.get(i),o=a&&a.get("targetPreviewValue"),l=null;!r&&o&&(l=o),"text"===t.type&&s._.isUndefined(t.input)?(t.placeholder=o,this.textInputs.push(n)):l&&this.model.set(t.name,l)}},_saveAppGroup:function(e){var t=this,n=this.options.entitlementAttributes,i=e.toJSON().profile;this.modelClone=this.model.clone(),s._.each(i,function(e,t){if(!s._.isNull(e)){var i="profile."+t,r=n.get(t),o=r&&r.get("targetPreviewValue"),l=!1;this._isTextInput(i)?l=a.default.isEmptyValue(e):s._.isArray(e)?l=a.default.isEqual(o,e):e===o&&(l=!0),l&&this.modelClone.set(i,null)}},this),this.modelClone.save().then(function(){t.model.trigger("sync")}).fail(function(e){t.model.trigger("invalid",t,e)})},_isTextInput:function(e){return s._.indexOf(this.textInputs,e)!==-1}})},131:function(e,t,n){var i,s;i=[n(104),n(132)],s=function(e,t){return e.extend({editModeView:function(){this.inputView=new t(this.options)}})}.apply(t,i),!(void 0!==s&&(e.exports=s))},132:function(e,t,n){var i,s;i=[n(101),n(106)],s=function(e,t){return t.extend({overrideResetCheck:function(){var t=e.isEmptyValue(this.model.get(this.formInput.name));t?this.hideReset():this.showReset()},handleResetClick:function(){this.model.set(this.formInput.name,null),this.hideReset(),this.render()}})}.apply(t,i),!(void 0!==s&&(e.exports=s))},133:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),s=i.internal.views.forms.helpers.SchemaFormFactory,r=i.internal.util.SchemaUtil;t.default=i.Form.extend({save:function(){return this.model.isNew()?(0,i.loc)("oform.custom.save.goBack"):(0,i.loc)("oform.save")},noCancelButton:!0,autoSave:!0,layout:"o-form-wrap",initialize:function(){this._addUserAssignmentHelpText(this.options.userAssignmentHelpText),this.addExtraHeaderInfo(),this.addInputsForProperties(),this.addCancelButton(),this.listenTo(this.model,"form:field-error",this._flattenErrors)},addExtraHeaderInfo:function(){this.model.isNew()&&this.add((0,i.createCallout)({type:"info",title:(0,i.loc)("group.appassignment.assign.extraInfo.header"),subtitle:(0,i.loc)("group.appassignment.assign.extraInfo.body")}))},addInputsForProperties:function(){var e=[];this.options.schemaProperties.each(function(t){var n=s.createInputOptions(t);return e.push(n.name),this._unflattenObjectType(t,n.name),this.addInputForProperty(n,t),n},this),this.inputNames=e},addInputForProperty:function(e){this.addInput(e)},addCancelButton:function(){this.addButton({type:"cancel",text:this.model.isNew()?(0,i.loc)("oform.custom.cancel.goBack"):(0,i.loc)("oform.cancel"),className:"cancel"})},_unflattenObjectType:function(e,t){var n=e.get("properties"),s=!this.model.has(t)&&r.isObjectDataType(e.get("__displayType__"))&&!!n,a=void 0;s&&(a=i._.mapObject(n,function(e,n){var i=t+"."+n,s=this.model.get(i);return this.model.unset(i),s},this),this.model.set(t,a))},_flattenErrors:function(e,t){var n="profile."+e;i._.contains(this.inputNames,n)&&this.model.trigger("form:field-error",n,t)},_addUserAssignmentHelpText:function(e){if(e.get("displayUserAssignmentHelpText")){var t=e.get("appName");this.add((0,i.createCallout)({type:"warning",title:(0,i.loc)("app."+t+".user_assignment_help_text.title"),subtitle:(0,i.loc)("app."+t+".user_assignment_help_text.content")}))}},parseErrorMessage:function(e){if(e){var t=JSON.stringify(e);/Property '.+' not found/.test(t)&&(e.errorSummary=(0,i.loc)("group.appassignment.assign.property.error"))}return e}})},134:function(e,t,n){var i,s;i=[n(2),n(113)],s=function(e,t){var n=t.Model.extend({url:function(){return e.tpl("/api/v1/apps/{{id}}/user/types/groups?expand=schema")(this)}});return{Model:n}}.apply(t,i),!(void 0!==s&&(e.exports=s))},293:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),r=n(294),a=i(r),o=n(130),l=i(o),u=n(133),p=i(u);t.default=a.default.extend({setForm:function(){this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")?this.form=new l.default(s._.omit(this.options,"title")):this.form=new p.default(s._.omit(this.options,"title"))}})},294:function(e,t,n){var i,s;i=[n(2)],s=function(e){var t="edit-assignment-modal",n=e._,i=e.$;return e.ModalDialog.extend({params:{containerId:t,position:["50%"],minWidth:620,maxWidth:688,autoResize:!0},initialize:function(){this.form&&this.form.remove(),this.setForm(),this.form&&(this.add(this.form),this._addFormListeners())},render:function(){e.ModalDialog.prototype.render.apply(this,arguments);var t=this;return n.defer(function(){t.resizeModal(),i(window).resize(n.debounce(function(){t.resizeModal()},100))}),this},setForm:function(){throw new Error("setForm() is an abstract method")},resizeModal:function(){var e=i("#"+t),n=this.form,s=e.height(),r=i(window).height();s>r?n.contentHeight(n.contentHeight()-(s-r)):n.contentHeight(n.contentHeight()+(r-s)),e.css("margin-top",-(e.height()/2))},_addFormListeners:function(){this.listenTo(this.form,"resize",function(){this.resize(),i(window).trigger("resize")}),this.listenTo(this.form,"cancel",this.remove),this.listenTo(this.form.model,"sync",this.remove)}})}.apply(t,i),!(void 0!==s&&(e.exports=s))},350:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),r=n(111),a=i(r),o=n(134),l=i(o),u=n(120),p=i(u),d=n(121),c=i(d),f=n(129),h=i(f),_=n(293),g=i(_),m=s.internal.views.forms.helpers.SchemaFormFactory;t.default=s.Controller.extend({initialize:function(){s._.bindAll(this,"renderDeleteModal","displayEditModal"),this.appInstanceId=this.options.appInstanceId,this.groupId=this.options.groupId,this.options.deleteApp?this.deleteAppAssignment():this.editAppAssignment()},deleteAppAssignment:function(){this.model=new h.default.Model({id:this.groupId,__instanceId__:this.appInstanceId}),this.model.fetch().then(this.renderDeleteModal)},renderDeleteModal:function(){var e=this;this.confirm({title:(0,s.loc)("group.confirm.delete.title"),subtitle:(0,s.loc)("group.confirm.delete.message","messages",[this.options.appInstanceLabel]),ok:function(){e.model.destroy(),(0,s.$)("li#"+e.appInstanceId).hide()}})},editAppAssignment:function(){var e=this,t={};this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")&&(t.expand=[h.default.EXPAND.METADATA]),this.model=new h.default.Model({id:this.groupId,__instanceId__:this.appInstanceId},t),this.appGroupProfile=new l.default.Model({id:this.appInstanceId}),this.possibleValues=new p.default({__instanceId__:this.appInstanceId}),this.userAssignmentHelpText=new c.default({instanceId:this.appInstanceId}),s.$.when(this.model.fetch(),this.appGroupProfile.fetch(),this.possibleValues.fetch(),this.userAssignmentHelpText.fetch()).then(function(){return e.entitlementFetch(e.appGroupProfile,e.model)}).then(this.displayEditModal)},displayEditModal:function(e){var t=m.prepareSchema(this.appGroupProfile.get("properties"),this.possibleValues.toJSON(),this.model);if(t.length>0)this.modal=new g.default({settings:this.settings,model:this.model,schemaProperties:t,state:this.state,title:this.options.title,appInstanceId:this.appInstanceId,appName:this.options.appName,entitlementAttributes:e,userAssignmentHelpText:this.userAssignmentHelpText}),this.modal.render();else{var n=this.options.appInstanceLabel;this.confirm({title:this.options.title,subtitle:(0,s.loc)("group.noprofile.modal.message","messages",[n,n,n]),save:(0,s.loc)("ok")})}},entitlementFetch:function(e,t){return this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")?a.default.createGAAEntitlementMeta(e,t):null}})},448:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),r=n(350),a=i(r),o=n(449),l=i(o),u=n(454),p=i(u),d=function(e){return e.currentTarget.id.split("-").pop()},c=function(e){return(0,s.$)("#app-instance-home-"+d(e)).text()},f=function(e){return(0,s.$)("#app-instance-home-"+d(e)).data("app-name")};t.default=s.Router.extend({routes:{"":"users","tab-users":"users","tab-apps/:appId/edit":"edit","tab-apps/:appId/destroy":"destroy","tab-apps/manage":"manage"},initialize:function(e){var t=(0,s.$)(e.manageButton),n=(0,s.$)(e.editButtons),i=(0,s.$)(e.removeButtons),r=this;this.groupId=e.groupId,this.groupName=e.groupName,this.appInstanceLabel=void 0,t.click(function(e){e.preventDefault();var t="tab-apps/manage";r.navigate(t,{trigger:!0})}),n.click(function(e){e.preventDefault(),r.appInstanceLabel=c(e),r.appName=f(e);var t="tab-apps/"+d(e)+"/edit";r.navigate(t,{trigger:!0})}),i.click(function(e){e.preventDefault(),r.appInstanceLabel=c(e);var t="tab-apps/"+d(e)+"/destroy";r.navigate(t,{trigger:!0})})},edit:function(e){this.makeAppsTabActive(),this.render(a.default,{groupId:this.groupId,groupName:this.groupName,appInstanceId:e,appInstanceLabel:this.appInstanceLabel,appName:this.appName,title:(0,s.loc)("group.appassignment.edit.title")})},destroy:function(e){this.makeAppsTabActive(),this.render(a.default,{deleteApp:!0,groupId:this.groupId,appInstanceId:e,appInstanceLabel:this.appInstanceLabel})},manage:function(){this.makeAppsTabActive(),this.render(l.default,{groupId:this.groupId,groupName:this.groupName})},makeAppsTabActive:function(){this.navigate("tab-apps")},users:function(){this.settings.hasFeature("GROUPS_UI_BACKBONE_CONVERSION")&&this.render(p.default,{el:this.settings.get("groupUsersContainer"),groupId:this.settings.get("groupId"),groupName:this.settings.get("groupName")})}})},449:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),r=n(450),a=i(r);t.default=s.Controller.extend({state:{unassignedSearchQuery:void 0,newAssignmentCount:0},initialize:function(){s._.extend(this.options,s._.pick(this,"state")),this.assignmentModal=new a.default(s._.omit(this.options,"el")),this.listenTo(this.state,"closeModal",this.reloadPage)},preRender:function(){this.assignmentModal.render()},reloadPage:function(){window.location.replace((0,s.tpl)("/admin/group/{{groupId}}#tab-apps")({groupId:this.options.groupId})),window.location.reload()}})},450:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),r=n(451),a=i(r),o=n(128),l=i(o),u=n(453),p=i(u);t.default=l.default.extend({datalistView:p.default,title:function(){return(0,s.loc)("group.appassignment.modal.title","messages",[this.options.groupName])},getCollection:function(){return new a.default.Collection(null,this.options.groupId,{appStatus:"catalog"})},getDataForAssignment:function(e){var t=this.collection.get(e);return{appInstanceId:e,appName:t.get("name"),groupId:this.options.groupId}}})},451:function(e,t,n){var i,s;i=[n(452)],s=function(e){var t=e.Model,n=e.Collection.extend({model:t,appOrigin:"group"});return{Model:t,Collection:n}}.apply(t,i),!(void 0!==s&&(e.exports=s))},452:function(e,t,n){var i,s;i=[n(2)],s=function(e){var t=e._,n=["active_directory","ldap_sun_one"],i=e.Model.extend({flat:!1,props:{id:["string",!0],_links:"string",accessibility:"object",created:"string",credentials:"object",features:"array",label:"string",lastUpdated:"string",licensing:"object",name:"string",settings:"object",profile:"object",signOnMode:"string",status:"string",visibility:"object"},local:{__isAssigned__:"boolean"},derived:{__logoUrl__:{deps:["_links"],fn:function(e){try{return e.logo[0].href}catch(e){return null}}},__scheme__:{deps:["credentials"],fn:function(e){try{return e.scheme}catch(e){return null}}}}}),s=e.Collection.extend({model:i,appOrigin:"user",initialize:function(e,n,i){if(i||(i={}),this.__userId__=n,!this.__userId__)throw"Cannot initialize User/GroupApp.Collection without an user/group id";if(!t.contains(["user","group"],this.appOrigin))throw"appOrigin has to be 'user' or 'group' to initialize User/GroupApp.Collection";var s=i.appStatus;this.__appStatus__="catalog"===s?s:void 0},parse:function(e){var i=this;return e=t.reject(e,function(e){return"INACTIVE"===e.status||t.contains(n,e.name)}),e=t.map(e,function(e){return e.__isAssigned__="catalog"!==i.__appStatus__,e})},url:function(){var t=e.tpl("/api/v1/{{appOrigin}}s/{{__userId__}}/{{#if __appStatus__}}{{__appStatus__}}/{{/if}}apps");return t(this)}});return{Model:i,Collection:s}}.apply(t,i),!(void 0!==s&&(e.exports=s))},453:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),r=n(126),a=i(r);t.default=a.default.extend({id:"assign-apps-list",className:"org-app-list",columns:[{template:'<div class="app-icon-mini"><img src="{{__logoUrl__}}" alt="{{name}}"></div>'},{className:"app-label",template:'<p class="app-instance-name">{{label}}</p>'},{className:"app-actions",template:'\t          {{#if __isAssigned__}}\t            <input name="assign" class="button disabled" data-se={{id}} type="button" disabled\t            value="{{i18n code="group.row.assigned"}}">\t          {{else}}\t            <input name="assign" class="button" data-se={{id}} type="button" \t            value="{{i18n code="group.row.assign"}}">\t          {{/if}}\t        ',events:{"click input":function(e){e.preventDefault(),e.stopPropagation(),this.state.trigger("assign",this.model.get("id"))}},initialize:function(){this.listenTo(this.model,"change:__isAssigned__",this.render)}}],emptyState:{title:(0,s.loc)("group.appassignment.empty.title"),subtitle:(0,s.loc)("group.appassignment.assign.empty.subtitle")}})},454:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),r=n(455),a=i(r),o=n(456),l=i(o),u=n(459),p=i(u),d=n(461),c=i(d),f=n(462),h=i(f),_=200;t.default=s.Controller.extend({View:l.default,state:{assignedSearchQuery:void 0},stateEvents:{assignGroupUser:"handleAddAssignment",unassignGroupUser:"handleRemoveAssignment",closeModal:"handleAddModalClose","change:assignedSearchQuery":"fetchCollection"},initialize:function(){this.groupMemberUtil=new p.default({groupId:this.options.groupId,filter:c.default.FILTER.MEMBERS}),this.collection=this.groupMemberUtil.getCollection(),this.fetchCollection()},fetchCollection:function(){var e=this,t=this.state.get("assignedSearchQuery");if(t)this.groupMemberUtil.search(t);else{var n=new a.default.Collection(null,{groupId:this.options.groupId}),i={limit:_};n.fetch({data:i}).then(function(){return e.groupMemberUtil.convertFromGroupUser(n)}).fail(function(t){return e.groupMemberUtil.error(t)})}},handleAddAssignment:function(){this.groupUserAssignmentModal=new h.default({groupId:this.options.groupId,groupName:this.options.groupName,state:this.state}),this.groupUserAssignmentModal.render()},handleRemoveAssignment:function(e){var t=this.collection.get(e),n=t.get("__displayName__");this.confirm((0,s.loc)("appinstance.userassignment.assigned.unassign.confirm.title"),(0,s.loc)("appinstance.unassign.confirm.content","messages",[n,this.options.groupName]),this._removeMember.bind(this,e))},_removeMember:function(e){this.groupMemberUtil.delete(e).then(this.fetchCollection.bind(this)).then(this.unassignUserSucceed.bind(this)).fail(this.unassignUserFailed.bind(this))},handleAddModalClose:function(){var e=this.groupUserAssignmentModal.getNewAssignmentCount();if(e>0){var t=1===e?(0,s.loc)("appinstance.assignments.notify.person.assigned"):(0,s.loc)("appinstance.assignments.notify.people.assigned","messages",[e]);this.notify("success",t),this.fetchCollection()}},unassignUserSucceed:function(){this.notify("success",(0,s.loc)("appinstance.userassignment.assigned.unassign.confirm.success"))},unassignUserFailed:function(){this.notify("error",(0,s.loc)("appinstance.userassignment.assigned.unassign.error"))}})},455:function(e,t,n){var i,s;i=[n(2)],s=function(e){var t=e.tpl("/api/v1/groups/{{groupId}}/users"),n=e.Model.extend({extraProperties:/^(_links)/,props:{id:"string",status:"string",created:"string",activated:"string",statusChanged:"string",lastLogin:"string",lastUpdated:"string",passwordChanged:"string",profile:"object",credentials:"object"},local:{__groupId__:"string",__isAssigned__:"boolean"},derived:{__displayName__:{deps:["profile"],fn:function(e){return e?e.firstName+" "+e.lastName:""}}},urlRoot:function(){return t({groupId:this.get("__groupId__")})},initialize:function(e,t){if(t||(t={}),t.collection&&t.collection.groupId&&this.set("__groupId__",t.collection.groupId),!this.get("__groupId__"))throw"Cannot initialize GroupUser without an group id"}}),i=e.Collection.extend({model:n,initialize:function(e,t){if(this.groupId=t.groupId,!this.groupId)throw"Cannot initialize GroupUsers without an group id"},url:function(){return t({groupId:this.groupId})}});return{Model:n,Collection:i}}.apply(t,i),!(void 0!==s&&(e.exports=s))},456:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),r=n(457),a=i(r);t.default=s.DataList.extend({columns:[{label:(0,s.loc)("group.member.person.label"),view:s.View.extend({template:'<div class="float-l people-desc"><a class="link-user-profile" href="/admin/user/profile/view/{{id}}">{{__displayName__}}</a><p class="user-email">{{profile.email}}</p></div>',initialize:function(){this.settings.hasPermission("removeFromGroup")&&this.add((0,s.createButton)({className:"float-r delete-group-user",icon:"cancel-16",attributes:function(){return{"data-se":"delete-group-user-assignment-"+this.model.get("id")}},click:function(){this.state.trigger("unassignGroupUser",this.model.get("id"))}}))}})}],toolbar:[{type:"search",field:"assignedSearchQuery",align:"right",minChars:2}],initialize:function(){this.settings.hasPermission("addToGroup")&&this.addToolbarComponent({type:"button",title:(0,s.loc)("group.member.addMembers.button"),className:"button-primary assign-group-user",click:function(){this.state.trigger("assignGroupUser")}})},footer:a.default})},457:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),r=n(458),a=i(r),o=s.internal.views.datalist.Footer,l=(0,s.tpl)('<tr><td colspan="{{colspan}}"><div class="group-list-max-reach-footer">{{footerMessage}}</div></td></tr>');t.default=o.extend({render:function(){if(this.collection.hasMore()){var e=this.options.colspan||this.colspan||100,t=this.getFooterMessage();this.$el.html(l({colspan:e,footerMessage:t}))}else this.empty();return this},getFooterMessage:function(){var e=this.collection.getPaginationData();switch(e.fromFetch){case a.default.FETCH_STATUS.MAX_REACH:return(0,s.loc)("groups.footer.maxReach","messages",[this.collection.length]);case a.default.FETCH_STATUS.HIDDEN_RESULT:return(0,s.loc)("group.member.search.footer.hiddenResults")}}})},458:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),s={MAX_REACH:"maxReach",HIDDEN_RESULT:"hiddenResult"},r=i.Model.extend({props:{id:"string",profile:"object"},local:{__isAssigned__:"boolean"},derived:{__displayName__:{deps:["profile"],fn:function(e){return e.firstName+" "+e.lastName}}}}),a=i.Collection.extend({model:r});t.default={Model:r,Collection:a,FETCH_STATUS:s}},459:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),o=n(455),l=i(o),u=n(460),p=i(u),d=n(458),c=i(d),f=n(461),h=i(f),_=2e3,g=50,m=function(){function e(t){s(this,e),this.groupId=t.groupId,this.filter=t.filter,this.collection=new c.default.Collection,this.searchCollection=new p.default.Collection,this.groupMemberFilter=new h.default.Model(a._.pick(this,"filter","groupId"))}return r(e,[{key:"getCollection",value:function(){return this.collection}},{key:"search",value:function(e){var t={search:e,limit:_};this._showSpinner(),this.searchCollection.fetch({data:t}).then(this._applyFilter.bind(this)).then(this._setCollection.bind(this)).fail(this.error.bind(this)).always(this._hideSpinner.bind(this))}},{key:"add",value:function(e){var t=new l.default.Model({id:e,__groupId__:this.groupId});return t.save()}},{key:"delete",value:function(e){var t=this,n=new l.default.Model({id:e,__groupId__:this.groupId});return n.destroy().then(function(){t.collection.remove(e)})}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t?{fromFetch:t}:null;this.collection.setPagination(n),this.collection.reset(e,n)}},{key:"error",value:function(e){this.reset(),this.collection.trigger("error",this.collection,e)}},{key:"convertFromGroupUser",value:function(e){var t=e.map(function(e){return a._.pick(e.toJSON(),"id","profile")}),n=e.hasMore()?c.default.FETCH_STATUS.MAX_REACH:null;this.reset(t,n)}},{key:"_applyFilter",value:function(){var e=this.searchCollection.toJSON();return this.groupMemberFilter.set({ids:a._.pluck(e,"id")}),this.groupMemberFilter.save()}},{key:"_setCollection",value:function(){var e=this,t=this.groupMemberFilter.get("ids"),n=this._getHasMoreStatus(t);t=this._checkMaximumDataListSize(t);var i=a._.map(t,function(t){return{id:t,profile:a._.pick(e.searchCollection.get(t).toJSON(),"firstName","lastName","email")}});this.reset(i,n)}},{key:"_getHasMoreStatus",value:function(e){return e.length>g?c.default.FETCH_STATUS.MAX_REACH:this.searchCollection.hasMore()?c.default.FETCH_STATUS.HIDDEN_RESULT:null}},{key:"_checkMaximumDataListSize",value:function(e){return e.length>g?e.slice(0,g):e}},{key:"_showSpinner",value:function(){this.collection.trigger("request",this.collection)}},{key:"_hideSpinner",value:function(){this.collection.trigger("sync")}}]),e}();t.default=m},460:function(e,t,n){var i,s;i=[n(2)],s=function(e){var t=e.loc,n={EVERYONE:{name:"EVERYONE",title:t("people.filters.everyone.title")},ACTIVATED:{name:"ACTIVATED",title:t("people.filters.activated.title")},PENDING:{name:"PENDING",title:t("people.filters.pending.title")},PASSWORD_RESET:{name:"PASSWORD_RESET",title:t("people.filters.passwordReset.title")},PASSWORD_EXPIRED:{name:"PASSWORD_EXPIRED",title:t("people.filters.passwordExpired.title")},DEACTIVATED:{name:"DEACTIVATED",title:t("people.filters.deactivated.title")},LOCKED_OUT:{name:"LOCKED_OUT",title:t("people.filters.lockedOut.title")},LAST_30:{name:"last30",title:t("people.filters.last30.title")},SUSPENDED:{name:"SUSPENDED",title:t("people.filters.suspended.title")}},i={ACTIVE:"ACTIVE",PASSWORD_RESET:"PASSWORD_RESET"},s=e.BaseModel.extend({defaults:{id:null,firstName:null,lastName:null,login:null,email:null,status:null}}),r=e.Collection.extend({model:s,url:"/api/internal/people",parse:function(t,s){return this.setPagination(t.offset>0&&{offset:t.offset},{fromFetch:!0}),s.data.filter===n.PASSWORD_RESET.name?e._.where(t.personList,{statusCode:i.PASSWORD_RESET}):t.personList}});return{Model:s,Collection:r,Filters:n,LoginStatuses:i}}.apply(t,i),!(void 0!==s&&(e.exports=s))},461:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),s={MEMBERS:"members",NON_MEMBERS:"nonMembers"},r=i.Model.extend({props:{ids:"object"},local:{groupId:"string",filter:["string",!0,s.MEMBERS]},url:function(){return"/api/internal/v1/groups/"+this.get("groupId")+"/members?include="+this.get("filter")}});t.default={Model:r,FILTER:s}},462:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),r=n(123),a=i(r),o=n(459),l=i(o),u=n(461),p=i(u),d=n(463),c=i(d);t.default=a.default.extend({datalistView:c.default,constructor:function(e){e||(e={}),this.groupMemberUtil=new l.default({groupId:e.groupId,filter:p.default.FILTER.NON_MEMBERS}),a.default.apply(this,arguments)},initialize:function(){a.default.prototype.initialize.apply(this,arguments),this.state.set("unassignedSearchQuery",""),this.listenTo(this.collection,"newUserAssigned",this.updateNewAssignmentCount),this.newlyAssignedUsersCount=0},title:function(){return(0,s.loc)("group.member.modal.addMember.title","messages",[this.options.groupName])},postRender:function(){this.groupMemberUtil.reset()},getCollection:function(){return this.groupMemberUtil.getCollection()},createAssignmentForm:function(e){return this.groupMemberUtil.add(e).then(this.updateCollection).then(s._.constant(null))},fetchCollection:function(){this.state.get("unassignedSearchQuery")?this.groupMemberUtil.search(this.state.get("unassignedSearchQuery")):this.groupMemberUtil.reset()},updateNewAssignmentCount:function(){this.newlyAssignedUsersCount+=1},getNewAssignmentCount:function(){return this.newlyAssignedUsersCount}})},463:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),r=n(126),a=i(r),o=n(457),l=i(o);t.default=a.default.extend({columns:[{template:'<a href="/admin/user/profile/view/{{id}}">{{__displayName__}}</a><span class="user-email">{{profile.email}}</span>'},{className:"user-action",template:'\t          {{#if __isAssigned__}}\t            <input name="ADD_USER" data-se=ua-{{id}} class="button disabled" type="button" disabled\t            value="{{i18n code="appinstance.assigned"}}">\t          {{else}}\t            <input name="ADD_USER"  data-se=ua-{{id}} class="button" type="button" \t            value="{{i18n code="appinstance.assign"}}">\t          {{/if}}\t        ',events:{"click input":function(e){e.preventDefault(),e.stopPropagation(),this.state.trigger("assign",this.model.get("id"))}},initialize:function(){var e=this;this.listenTo(this.model,"change:__isAssigned__",function(){e.collection.trigger("newUserAssigned"),e.render()})}}],toolbar:[{type:"search",align:"left",minChars:2,field:"unassignedSearchQuery"}],emptyState:{title:function(){return this.state.get("unassignedSearchQuery")?(0,s.loc)("datalist.empty_title"):(0,s.loc)("group.member.modal.emptyState.title")},subtitle:function(){return this.state.get("unassignedSearchQuery")?(0,s.loc)("datalist.empty_subtitle"):(0,s.loc)("group.member.modal.emptyState.subtitle")}},footer:l.default})}});