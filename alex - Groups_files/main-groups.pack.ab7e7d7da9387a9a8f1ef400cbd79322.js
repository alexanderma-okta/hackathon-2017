var initCourageApp=webpackJsonpinitCourageApp([11],{0:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var s=i(464),r=n(s);e.exports=function(e){new r.default(e).start()}},215:function(e,t,i){var n,s;n=[i(6)],s=function(e){!function(e){var t={isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"==typeof e},bind:e.proxy,each:function(t,i){function n(e,t){return i(t,e)}e.each(t,n)},map:e.map,filter:e.grep,every:function(t,i){var n=!0;return t?(e.each(t,function(e,s){if(!(n=i.call(null,s,e,t)))return!1}),!!n):n},some:function(t,i){var n=!1;return t?(e.each(t,function(e,s){if(n=i.call(null,s,e,t))return!1}),!!n):n},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(t){function i(){return String(t)}return e.isFunction(t)?t:i},defer:function(e){setTimeout(e,0)},debounce:function(e,t,i){var n,s;return function(){var r,o,a=this,u=arguments;return r=function(){n=null,i||(s=e.apply(a,u))},o=i&&!n,clearTimeout(n),n=setTimeout(r,t),o&&(s=e.apply(a,u)),s}},throttle:function(e,t){var i,n,s,r,o,a;return o=0,a=function(){o=new Date,s=null,r=e.apply(i,n)},function(){var u=new Date,l=t-(u-o);return i=this,n=arguments,l<=0?(clearTimeout(s),s=null,o=u,r=e.apply(i,n)):s||(s=setTimeout(a,l)),r}},noop:function(){}},i="0.10.2",n=function(e){function t(e){return e.split(/\s+/)}function i(e){return e.split(/\W+/)}function n(e){return function(t){return function(i){return e(i[t])}}}return{nonword:i,whitespace:t,obj:{nonword:n(i),whitespace:n(t)}}}(),s=function(){function e(e){this.maxSize=e||100,this.size=0,this.hash={},this.list=new i}function i(){this.head=this.tail=null}function n(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(e.prototype,{set:function(e,t){var i,s=this.list.tail;this.size>=this.maxSize&&(this.list.remove(s),delete this.hash[s.key]),(i=this.hash[e])?(i.val=t,this.list.moveToFront(i)):(i=new n(e,t),this.list.add(i),this.hash[e]=i,this.size++)},get:function(e){var t=this.hash[e];if(t)return this.list.moveToFront(t),t.val}}),t.mixin(i.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),e}(),r=function(){function e(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function i(){return(new Date).getTime()}function n(e){return JSON.stringify(t.isUndefined(e)?null:e)}function s(e){return JSON.parse(e)}var r,o;try{r=window.localStorage,r.setItem("~~~","!"),r.removeItem("~~~")}catch(e){r=null}return o=r&&window.JSON?{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(e){return this.isExpired(e)&&this.remove(e),s(r.getItem(this._prefix(e)))},set:function(e,s,o){return t.isNumber(o)?r.setItem(this._ttlKey(e),n(i()+o)):r.removeItem(this._ttlKey(e)),r.setItem(this._prefix(e),n(s))},remove:function(e){return r.removeItem(this._ttlKey(e)),r.removeItem(this._prefix(e)),this},clear:function(){var e,t,i=[],n=r.length;for(e=0;e<n;e++)(t=r.key(e)).match(this.keyMatcher)&&i.push(t.replace(this.keyMatcher,""));for(e=i.length;e--;)this.remove(i[e]);return this},isExpired:function(e){var n=s(r.getItem(this._ttlKey(e)));return!!(t.isNumber(n)&&i()>n)}}:{get:t.noop,set:t.noop,remove:t.noop,clear:t.noop,isExpired:t.noop},t.mixin(e.prototype,o),e}(),o=function(){function i(t){t=t||{},this._send=t.transport?n(t.transport):e.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get}function n(i){return function(n,s){function r(e){t.defer(function(){a.resolve(e)})}function o(e){t.defer(function(){a.reject(e)})}var a=e.Deferred();return i(n,s,r,o),a}}var r=0,o={},a=6,u=new s(10);return i.setMaxPendingRequests=function(e){a=e},i.resetCache=function(){u=new s(10)},t.mixin(i.prototype,{_get:function(e,t,i){function n(t){i&&i(null,t),u.set(e,t)}function s(){i&&i(!0)}function l(){r--,delete o[e],d.onDeckRequestArgs&&(d._get.apply(d,d.onDeckRequestArgs),d.onDeckRequestArgs=null)}var c,d=this;(c=o[e])?c.done(n).fail(s):r<a?(r++,o[e]=this._send(e,t).done(n).fail(s).always(l)):this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(e,i,n){var s;return t.isFunction(i)&&(n=i,i={}),(s=u.get(e))?t.defer(function(){n&&n(null,s)}):this._get(e,i,n),!!s}}),i}(),a=function(){function i(t){t=t||{},t.datumTokenizer&&t.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function n(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()})}function s(){return{ids:[],children:{}}}function r(e){for(var t={},i=[],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=!0,i.push(e[n]));return i}function o(e,t){function i(e,t){return e-t}var n=0,s=0,r=[];for(e=e.sort(i),t=t.sort(i);n<e.length&&s<t.length;)e[n]<t[s]?n++:e[n]>t[s]?s++:(r.push(e[n]),n++,s++);return r}return t.mixin(i.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var i=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var r,o;r=i.datums.push(e)-1,o=n(i.datumTokenizer(e)),t.each(o,function(e){var t,n,o;for(t=i.trie,n=e.split("");o=n.shift();)t=t.children[o]||(t.children[o]=s()),t.ids.push(r)})})},get:function(e){var i,s,a=this;return i=n(this.queryTokenizer(e)),t.each(i,function(e){var t,i,n,r;if(s&&0===s.length)return!1;for(t=a.trie,i=e.split("");t&&(n=i.shift());)t=t.children[n];return t&&0===i.length?(r=t.ids.slice(0),void(s=s?o(s,r):r)):(s=[],!1)}),s?t.map(r(s),function(e){return a.datums[e]}):[]},reset:function(){this.datums=[],this.trie=s()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),u=function(){function n(e){return e.local||null}function s(n){var s,r;return r={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(s=n.prefetch||null)&&(s=t.isString(s)?{url:s}:s,s=t.mixin(r,s),s.thumbprint=i+s.thumbprint,s.ajax.type=s.ajax.type||"GET",s.ajax.dataType=s.ajax.dataType||"json",!s.url&&e.error("prefetch requires url to be set")),s}function r(i){function n(e){return function(i){return t.debounce(i,e)}}function s(e){return function(i){return t.throttle(i,e)}}var r,o;return o={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(r=i.remote||null)&&(r=t.isString(r)?{url:r}:r,r=t.mixin(o,r),r.rateLimiter=/^throttle$/i.test(r.rateLimitBy)?s(r.rateLimitWait):n(r.rateLimitWait),r.ajax.type=r.ajax.type||"GET",r.ajax.dataType=r.ajax.dataType||"json",delete r.rateLimitBy,delete r.rateLimitWait,!r.url&&e.error("remote requires url to be set")),r}return{local:n,prefetch:s,remote:r}}();!function(i){function s(t){t&&(t.local||t.prefetch||t.remote)||e.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=l(t.sorter),this.dupDetector=t.dupDetector||c,this.local=u.local(t),this.prefetch=u.prefetch(t),this.remote=u.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new a({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new r(this.cacheKey):null}function l(e){function i(t){return t.sort(e)}function n(e){return e}return t.isFunction(e)?i:n}function c(){return!1}var d,p;return d=i.Bloodhound,p={data:"data",protocol:"protocol",thumbprint:"thumbprint"},i.Bloodhound=s,s.noConflict=function(){return i.Bloodhound=d,s},s.tokenizers=n,t.mixin(s.prototype,{_loadPrefetch:function(t){function i(e){r.clear(),r.add(t.filter?t.filter(e):e),r._saveToStorage(r.index.serialize(),t.thumbprint,t.ttl)}var n,s,r=this;return(n=this._readFromStorage(t.thumbprint))?(this.index.bootstrap(n),s=e.Deferred().resolve()):s=e.ajax(t.url,t.ajax).done(i),s},_getFromRemote:function(e,t){function i(e,i){t(e?[]:r.remote.filter?r.remote.filter(i):i)}var n,s,r=this;return e=e||"",s=encodeURIComponent(e),n=this.remote.replace?this.remote.replace(this.remote.url,e):this.remote.url.replace(this.remote.wildcard,s),this.transport.get(n,this.remote.ajax,i)},_saveToStorage:function(e,t,i){this.storage&&(this.storage.set(p.data,e,i),this.storage.set(p.protocol,location.protocol,i),this.storage.set(p.thumbprint,t,i))},_readFromStorage:function(e){var t,i={};return this.storage&&(i.data=this.storage.get(p.data),i.protocol=this.storage.get(p.protocol),i.thumbprint=this.storage.get(p.thumbprint)),t=i.thumbprint!==e||i.protocol!==location.protocol,i.data&&!t?i.data:null},_initialize:function(){function i(){s.add(t.isFunction(r)?r():r)}var n,s=this,r=this.local;return n=this.prefetch?this._loadPrefetch(this.prefetch):e.Deferred().resolve(),r&&n.done(i),this.transport=this.remote?new o(this.remote):null,this.initPromise=n.promise()},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){this.index.add(e)},get:function(e,i){function n(e){var n=r.slice(0);t.each(e,function(e){var i;return i=t.some(n,function(t){return s.dupDetector(e,t)}),!i&&n.push(e),n.length<s.limit}),i&&i(s.sorter(n))}var s=this,r=[],o=!1;r=this.index.get(e),r=this.sorter(r).slice(0,this.limit),r.length<this.limit&&this.transport&&(o=this._getFromRemote(e,n)),o||(r.length>0||!this.transport)&&i&&i(r)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&o.resetCache()},ttAdapter:function(){return t.bind(this.get,this)}}),s}(this);var l={wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'},c={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};t.isMsie()&&t.mixin(c.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t.isMsie()&&t.isMsie()<=7&&t.mixin(c.input,{marginTop:"-1px"});var d=function(){function i(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}var n="typeahead:";return t.mixin(i.prototype,{trigger:function(e){var t=[].slice.call(arguments,1);this.$el.trigger(n+e,t)}}),i}(),p=function(){function e(e,t,i,n){var s;if(!i)return this;for(t=t.split(u),i=n?a(i,n):i,this._callbacks=this._callbacks||{};s=t.shift();)this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][e].push(i);return this}function t(t,i,n){return e.call(this,"async",t,i,n)}function i(t,i,n){return e.call(this,"sync",t,i,n)}function n(e){var t;if(!this._callbacks)return this;for(e=e.split(u);t=e.shift();)delete this._callbacks[t];return this}function s(e){var t,i,n,s,o;if(!this._callbacks)return this;for(e=e.split(u),n=[].slice.call(arguments,1);(t=e.shift())&&(i=this._callbacks[t]);)s=r(i.sync,this,[t].concat(n)),o=r(i.async,this,[t].concat(n)),s()&&l(o);return this}function r(e,t,i){function n(){for(var n,s=0;!n&&s<e.length;s+=1)n=e[s].apply(t,i)===!1;return!n}return n}function o(){var e;return e=window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}function a(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var u=/\s+/,l=o();return{onSync:i,onAsync:t,off:n,trigger:s}}(),h=function(e){function i(e,i,n){for(var s,r=[],o=0;o<e.length;o++)r.push(t.escapeRegExChars(e[o]));return s=n?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",i?new RegExp(s):new RegExp(s,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(s){function r(t){var i,n;return(i=a.exec(t.data))&&(wrapperNode=e.createElement(s.tagName),s.className&&(wrapperNode.className=s.className),n=t.splitText(i.index),n.splitText(i[0].length),wrapperNode.appendChild(n.cloneNode(!0)),t.parentNode.replaceChild(wrapperNode,n)),!!i}function o(e,t){for(var i,n=3,s=0;s<e.childNodes.length;s++)i=e.childNodes[s],i.nodeType===n?s+=t(i)?1:0:o(i,t)}var a;s=t.mixin({},n,s),s.node&&s.pattern&&(s.pattern=t.isArray(s.pattern)?s.pattern:[s.pattern],a=i(s.pattern,s.caseSensitive,s.wordsOnly),o(s.node,r))}}(window.document),f=function(){function i(i){var s,r,a,u,l=this;i=i||{},i.input||e.error("input is missing"),s=t.bind(this._onBlur,this),r=t.bind(this._onFocus,this),a=t.bind(this._onKeydown,this),u=t.bind(this._onInput,this),this.$hint=e(i.hint),this.$input=e(i.input).on("blur.tt",s).on("focus.tt",r).on("keydown.tt",a),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop),t.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){o[e.which||e.keyCode]||t.defer(t.bind(l._onInput,l,e))}):this.$input.on("input.tt",u),this.query=this.$input.val(),this.$overflowHelper=n(this.$input)}function n(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function s(e,t){return i.normalizeQuery(e)===i.normalizeQuery(t)}function r(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var o;return o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(e){return(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(i.prototype,p,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(e){var t=o[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(e,t){var i,n,s;switch(e){case"tab":n=this.getHint(),s=this.getInputValue(),i=n&&n!==s&&!r(t);break;case"up":case"down":i=!r(t);break;default:i=!1}i&&t.preventDefault()},_shouldTrigger:function(e,t){var i;switch(e){case"tab":i=!r(t);break;default:i=!0}return i},_checkInputValue:function(){var e,t,i;e=this.getInputValue(),t=s(e,this.query),i=!!t&&this.query.length!==e.length,t?i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query=e)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){this.$input.val(e),t?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,i,n;e=this.getInputValue(),t=this.getHint(),i=e!==t&&0===t.indexOf(e),n=""!==e&&i&&!this.hasOverflow(),!n&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,i,n;return e=this.$input.val().length,i=this.$input[0].selectionStart,t.isNumber(i)?i===e:!document.selection||(n=document.selection.createRange(),n.moveStart("character",-e),e===n.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),i}(),g=function(){function i(i){i=i||{},i.templates=i.templates||{},i.source||e.error("missing source"),i.name&&!r(i.name)&&e.error("invalid dataset name: "+i.name),this.query=null,this.highlight=!!i.highlight,this.name=i.name||t.getUniqueId(),this.source=i.source,this.displayFn=n(i.display||i.displayKey),this.templates=s(i.templates,this.displayFn),this.$el=e(l.dataset.replace("%CLASS%",this.name))}function n(e){function i(t){return t[e]}return e=e||"value",t.isFunction(e)?e:i}function s(e,i){function n(e){return"<p>"+i(e)+"</p>"}return{empty:e.empty&&t.templatify(e.empty),header:e.header&&t.templatify(e.header),footer:e.footer&&t.templatify(e.footer),suggestion:e.suggestion||n}}function r(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var o="ttDataset",a="ttValue",u="ttDatum";return i.extractDatasetName=function(t){return e(t).data(o)},i.extractValue=function(t){return e(t).data(a)},i.extractDatum=function(t){return e(t).data(u)},t.mixin(i.prototype,p,{_render:function(i,n){function s(){return g.templates.empty({query:i,isEmpty:!0})}function r(){function s(t){var i;return i=e(l.suggestion).append(g.templates.suggestion(t)).data(o,g.name).data(a,g.displayFn(t)).data(u,t),i.children().each(function(){e(this).css(c.suggestionChild)}),i}var r,d;return r=e(l.suggestions).css(c.suggestions),d=t.map(n,s),r.append.apply(r,d),g.highlight&&h({node:r[0],pattern:i}),r}function d(){return g.templates.header({query:i,isEmpty:!f})}function p(){return g.templates.footer({query:i,isEmpty:!f})}if(this.$el){var f,g=this;this.$el.empty(),f=n&&n.length,!f&&this.templates.empty?this.$el.html(s()).prepend(g.templates.header?d():null).append(g.templates.footer?p():null):f&&this.$el.html(r()).prepend(g.templates.header?d():null).append(g.templates.footer?p():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(e){function t(t){i.canceled||e!==i.query||i._render(e,t)}var i=this;this.query=e,this.canceled=!1,this.source(e,t)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),i}(),m=function(){function i(i){var s,r,o,a=this;i=i||{},i.menu||e.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=t.map(i.datasets,n),s=t.bind(this._onSuggestionClick,this),r=t.bind(this._onSuggestionMouseEnter,this),o=t.bind(this._onSuggestionMouseLeave,this),this.$menu=e(i.menu).on("click.tt",".tt-suggestion",s).on("mouseenter.tt",".tt-suggestion",r).on("mouseleave.tt",".tt-suggestion",o),t.each(this.datasets,function(e){a.$menu.append(e.getRoot()),e.onSync("rendered",a._onRendered,a)})}function n(e){return new g(e)}return t.mixin(i.prototype,p,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",e(t.currentTarget))},_onSuggestionMouseEnter:function(t){this._removeCursor(),this._setCursor(e(t.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function e(e){return e.isEmpty()}this.isEmpty=t.every(this.datasets,e),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(e,t){e.first().addClass("tt-cursor"),!t&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(e){var t,i,n,s;if(this.isOpen){if(i=this._getCursor(),t=this._getSuggestions(),this._removeCursor(),n=t.index(i)+e,n=(n+1)%(t.length+1)-1,n===-1)return void this.trigger("cursorRemoved");n<-1&&(n=t.length-1),this._setCursor(s=t.eq(n)),this._ensureVisible(s)}},_ensureVisible:function(e){var t,i,n,s;t=e.position().top,i=t+e.outerHeight(!0),n=this.$menu.scrollTop(),s=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),t<0?this.$menu.scrollTop(n+t):s<i&&this.$menu.scrollTop(n+(i-s))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(e){this.$menu.css("ltr"===e?c.ltr:c.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(e){var t=null;return e.length&&(t={raw:g.extractDatum(e),value:g.extractValue(e),datasetName:g.extractDatasetName(e)}),t},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(e){function i(t){t.update(e)}t.each(this.datasets,i)},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function e(e){e.destroy()}this.$menu.off(".tt"),this.$menu=null,t.each(this.datasets,e)}}),i}(),_=function(){function i(i){var s,r,o;i=i||{},i.input||e.error("missing input"),this.isActivated=!1,this.autoselect=!!i.autoselect,this.minLength=t.isNumber(i.minLength)?i.minLength:1,this.$node=n(i.input,i.withHint),s=this.$node.find(".tt-dropdown-menu"),r=this.$node.find(".tt-input"),o=this.$node.find(".tt-hint"),r.on("blur.tt",function(e){var i,n,o;i=document.activeElement,n=s.is(i),o=s.has(i).length>0,t.isMsie()&&(n||o)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){r.focus()}))}),s.on("mousedown.tt",function(e){e.preventDefault()}),this.eventBus=i.eventBus||new d({el:r}),this.dropdown=new m({menu:s,datasets:i.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new f({input:r,hint:o}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function n(t,i){var n,r,a,u;n=e(t),r=e(l.wrapper).css(c.wrapper),a=e(l.dropdown).css(c.dropdown),u=n.clone().css(c.hint).css(s(n)),u.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",!0).attr({autocomplete:"off",spellcheck:"false"}),n.data(o,{dir:n.attr("dir"),autocomplete:n.attr("autocomplete"),spellcheck:n.attr("spellcheck"),style:n.attr("style")}),n.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(i?c.input:c.inputWithNoHint);try{!n.attr("dir")&&n.attr("dir","auto")}catch(e){}return n.wrap(r).parent().prepend(i?u:null).append(a)}function s(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function r(e){var i=e.find(".tt-input");t.each(i.data(o),function(e,n){t.isUndefined(e)?i.removeAttr(n):i.attr(n,e)}),i.detach().removeData(o).removeClass("tt-input").insertAfter(e),e.remove()}var o="ttAttrs";return t.mixin(i.prototype,{_onSuggestionClicked:function(e,t){var i;(i=this.dropdown.getDatumForSuggestion(t))&&this._select(i)},_onCursorMoved:function(){var e=this.dropdown.getDatumForCursor();this.input.setInputValue(e.value,!0),this.eventBus.trigger("cursorchanged",e.raw,e.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(e,t){var i,n;i=this.dropdown.getDatumForCursor(),n=this.dropdown.getDatumForTopSuggestion(),i?(this._select(i),t.preventDefault()):this.autoselect&&n&&(this._select(n),t.preventDefault())},_onTabKeyed:function(e,t){var i;(i=this.dropdown.getDatumForCursor())?(this._select(i),t.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,t){this.input.clearHintIfInvalid(),t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var e;this.dir!==(e=this.input.getLanguageDirection())&&(this.dir=e,this.$node.css("direction",e),this.dropdown.setLanguageDirection(e))},_updateHint:function(){var e,i,n,s,r,o;e=this.dropdown.getDatumForTopSuggestion(),e&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(i=this.input.getInputValue(),n=f.normalizeQuery(i),s=t.escapeRegExChars(n),r=new RegExp("^(?:"+s+")(.+$)","i"),o=r.exec(e.value),o?this.input.setHint(i+o[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(e){var t,i,n,s;t=this.input.getHint(),i=this.input.getQuery(),n=e||this.input.isCursorAtEnd(),t&&i!==t&&n&&(s=this.dropdown.getDatumForTopSuggestion(),s&&this.input.setInputValue(s.value),this.eventBus.trigger("autocompleted",s.raw,s.datasetName))},_select:function(e){this.input.setQuery(e.value),this.input.setInputValue(e.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",e.raw,e.datasetName),this.dropdown.close(),t.defer(t.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(e){this.isActivated?this.input.setInputValue(e):(this.input.setQuery(e),this.input.setInputValue(e,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),r(this.$node),this.$node=null}}),i}();!function(){var i,n,s;i=e.fn.typeahead,n="ttTypeahead",s={initialize:function(i,s){function r(){var r,o,a=e(this);t.each(s,function(e){e.highlight=!!i.highlight}),o=new _({input:a,eventBus:r=new d({el:a}),withHint:!!t.isUndefined(i.hint)||!!i.hint,minLength:i.minLength,autoselect:i.autoselect,datasets:s}),a.data(n,o)}return s=t.isArray(s)?s:[].slice.call(arguments,1),i=i||{},this.each(r)},open:function(){function t(){var t,i=e(this);(t=i.data(n))&&t.open()}return this.each(t)},close:function(){function t(){var t,i=e(this);(t=i.data(n))&&t.close()}return this.each(t)},val:function(t){function i(){var i,s=e(this);(i=s.data(n))&&i.setVal(t)}function s(e){var t,i;return(t=e.data(n))&&(i=t.getVal()),i}return arguments.length?this.each(i):s(this.first())},destroy:function(){function t(){var t,i=e(this);(t=i.data(n))&&(t.destroy(),i.removeData(n))}return this.each(t)}},e.fn.typeahead=function(e){return s[e]?s[e].apply(this,[].slice.call(arguments,1)):s.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=i,this}}()}(e)}.apply(t,n),/*!
	 * typeahead.js 0.10.2
	 * https://github.com/twitter/typeahead.js
	 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
	 */
!(void 0!==s&&(e.exports=s))},369:function(e,t,i){var n,s;n=[i(2),i(215)],s=function(e){var t=e._,i=e.$,n=function(e){return!!e},s=function(e){return{id:e.id,name:e.profile.firstName+" "+e.profile.lastName,email:e.profile.email}},r=e.tpl('\t        <li class="active-result clearfix">\t          <p>{{name}} {{#if email}}({{email}}){{/if}}</p>\t        </li>\t      '),o=e.tpl('<p class="no-suggestion">{{i18n code="searchResult.empty"}}</p>');return e.View.extend({className:"preview-user-picker o-form-input-group float-l",template:'\t      <div class="o-form-input-group-controls">\t        <div class="o-form-label-inline">\t          <span class="icon visibility-16"></span>\t          <span>{{i18n code="preview"}}</span>\t        </div>\t        <span class="input-fix o-form-control">\t          <input type="text" \t            placeholder="{{placeholder}}"/>\t        </span>\t      </div>\t    ',field:"userId",initialize:function(){var e=this;this.options.field&&(this.field=this.options.field),t.bindAll(this,"resetPicker","clearPicker"),this.source=new Bloodhound({remote:{url:this.options.userApiUrl||"/api/v1/users?q=%QUERY&limit=10&expand=stats",filter:function(i){return t.chain(i).map(e.options.parseResponse||t.identity).filter(n).map(s).value()}},datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace}),this.source.initialize()},render:function(){return e.View.prototype.render.apply(this,arguments),this.typeahead=this.$("input").typeahead({hint:!0,highlight:!0},{displayKey:"name",source:this.source.ttAdapter(),templates:{suggestion:r,empty:o}}),this.typeahead.on("typeahead:selected typeahead:autocompleted",t.bind(this.onSelect,this)),this},getTemplateData:function(){var i=e.View.prototype.getTemplateData.apply(this,arguments);return t.defaults(i,{placeholder:this.options.placeholder||""}),i},addCloseButton:function(){if(this.$(".cancel-16").length<1){var e=this,t=i('<a href="#" class="icon-16 icon-only cancel-16"></a>').click(e.clearPicker);this.$("input.tt-input").after(t)}},clearPicker:function(e){t.isFunction(e.preventDefault)&&(e.preventDefault(),e.stopPropagation()),t.isBoolean(e)||(e=!0),this.$("input").typeahead("val",""),e&&this.$("input.tt-input").focus(),this.$(".cancel-16").remove(),this.trigger("onClear")},resetPicker:function(){this.clearPicker(!1),this.model&&this.model.unset(this.field)},onSelect:function(e,t){this.model&&this.model.set(this.field,t.id),this.addCloseButton(),i(this).typeahead("close"),this.trigger("onSelect",{userId:t.id})},prefillUser:function(e){var t=s(e);this.typeahead.typeahead("val",t.name),this.onSelect(new i.Event,t)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},464:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(465),o=n(r),a=i(470),u=n(a);t.default=s.TabbedRouter.extend({initialize:function(){this.tab(["","search?(:query)"],"home",(0,s.loc)("groups.tab")),this.settings.hasFeature("GROUP_MEMBERSHIP_RULES")&&this.tab("rules","rules",(0,s.loc)("groups.rules.tab"))},home:function(e){this.render(o.default,{state:{sSearch:e}}),this.listenTo(this.controller.state,"change:sSearch",function(e,t){this.navigate("search?"+t)})},rules:function(){this.render(u.default)}})},465:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(466),o=n(r),a=i(467),u=n(a),l=i(469),c=n(l);t.default=s.DataListController.extend({Collection:o.default.Collection,View:u.default,initialize:function(){this.settings.get("deleteMessage")&&this.notify("success",this.settings.get("deleteMessage"),{width:500})},addGroup:function(){this.form=new c.default(this.toJSON({model:new o.default.Model})),this.form.render(),this.listenTo(this.form,"saved",function(e){this.notify("success",(0,s.loc)("groups.group.created",null,[e.get("name")]),{width:500}),this.fetch()})}})},466:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=25,r=s+1,o=200,a=n.Model.extend({props:{id:"string",name:["string",!0],appName:"string",appDisplayName:"string",description:"string",userCount:"number",appCount:"number",dirCount:"number"},derived:{displayDescription:{deps:["description"],fn:function(e){return e||"No description"}}},urlRoot:"/api/v1/groups",parse:function(e){return e.profile?{id:e.id,name:e.profile.name,description:e.profile.description}:e},sync:function(e,t,i){switch(e){case"create":case"update":i.attrs={profile:t.pick("name","description")}}return n.BaseModel.prototype.sync.call(this,e,t,i)}}),u=n.Collection.extend({secureJSON:!0,reachMax:!1,model:a,url:"/admin/groups/search",sync:function(e,t,i){return this._data=i.data=n._.extend({iColumns:8,sColumns:n._.keys(a.prototype.props).join(","),orderBy:"name",sortDirection:"asc",maxResults:r,iDisplayStart:0,sSearch:""},i.data||{}),n.Collection.prototype.sync.call(this,e,t,i)},parse:function(e){var t=n._.size(e.aaData)>s,i=n._.map(e.aaData,function(e){return n._.object(n._.keys(a.prototype.props),e)}),r={};t&&i.splice(-1,1);var u=this.length+i.length;return t&&u<o&&(r.iDisplayStart=this.length+s),this.reachMax=t&&u>=o,this.setPagination(r,{fromFetch:!0}),i},hasReachMax:function(){return this.reachMax},getMaxRecordSize:function(){return o}});t.default={Model:a,Collection:u}},467:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(468),o=n(r);t.default=s.DataList.extend({id:"groups-list",footer:o.default,columns:[{label:(0,s.loc)("groups.group.source"),template:'<span class="icon icon-24 group-logos-24 logo-{{appName}}"\t        title="User membership for this group is managed in {{appDisplayName}}"></span>',className:"column-width"},{label:(0,s.loc)("groups.group.name"),template:'<a href="/admin/group/{{id}}">{{name}}</a><p class="text-light">{{displayDescription}}</p>'},{label:(0,s.loc)("groups.users"),name:"userCount"},{label:(0,s.loc)("groups.apps"),name:"appCount"},{label:(0,s.loc)("groups.dirs"),name:"dirCount"}],toolbar:[{type:"search",field:"sSearch",align:"right",minChars:1}],initialize:function(){this.settings.hasPermission("create")&&this.addToolbarComponent({type:"button",icon:"group-add-16",title:(0,s.loc)("groups.add.group"),click:function(){this.state.invoke("addGroup")}})},postRender:function(){this.$("table").attr("id","group-grid")}})},468:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.internal.views.datalist,r=s.Footer,o=s.components,a=o.LoadMore,u=(0,n.tpl)('<tr><td colspan="{{colspan}}">{{#if content}}<div class="group-list-max-reach-footer">{{content}}</div>{{/if}}</td></tr>');t.default=r.extend({render:function(){var e=this.options.colspan||this.colspan||100;if(this.collection.hasMore())this.$el.html(u({colspan:e})),this.$("td").html(new a(this.options).render().el);else if(this.collection.hasReachMax()){var t=this.collection.getMaxRecordSize();this.$el.html(u({colspan:e,content:(0,n.loc)("groups.footer.maxReach","messages",[t])}))}else this.empty();return this}})},469:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.FormDialog.extend({title:(0,n.loc)("groups.add.group"),subtitle:(0,n.loc)("groups.add.group.subtitle"),save:(0,n.loc)("groups.add.group"),autoSave:!0,inputs:[{type:"text",name:"name",label:(0,n.loc)("groups.group.name"),placeholder:(0,n.loc)("groups.group.name.placeholder")},{type:"text",name:"description",label:(0,n.loc)("groups.group.description"),placeholder:(0,n.loc)("groups.group.description.placeholder")}],initialize:function(){this.form.$el.attr("name","ADD_GROUP")}})},470:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(471),o=n(r),a=i(473),u=n(a),l=i(483),c=n(l),d=i(502),p=n(d);t.default=s.DataListController.extend({fetchEvents:"updateGroupRules",Collection:o.default.Collection,View:u.default,initialize:function(){this.addListeners()},addListeners:function(){this.listenTo(this.state,"addRule",this.renderAddModal),this.listenTo(this.state,"editRule",this.renderEditModal),this.listenTo(this.state,"removeRule",this.removeRule)},renderAddModal:function(){this.modal=new c.default({state:this.state,model:new o.default.Model}),this.modal.render()},renderEditModal:function(e){this.modal=new c.default({state:this.state,model:e}),this.modal.render()},removeRule:function(e){var t=s.Model.extend({props:{toRemoveUsers:["boolean",!1,!1]}}),i=new p.default({model:new t,ruleModel:e});i.render()},getFetchData:function(){return{limit:300}}})},471:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(472),o=n(r),a="/api/v1/groups/rules",u=5,l=s.Model.extend({urlRoot:a,extraProperties:!0,props:{id:"string",name:["string",!0],type:["string",!1,"group_rule"],description:"string",order:["number",!1],status:{type:"string",values:["ACTIVE","INACTIVE","INVALID"],value:"INACTIVE"},priorityOrder:["number",!1,0],"conditions.expression.type":["string",!1,"urn:okta:expression:1.0"],"conditions.expression.value":"string","conditions.people.groups.exclude":"array","conditions.people.users.exclude":"array","actions.assignUserToGroups.groupIds":["array",!0]},local:{__activeBuilder__:{type:"string",values:["BUILDER","EDITOR"],value:"BUILDER"},__expressionString__:"string",__expressionObject__:["object",!1,{}]},derived:{__valid__:{deps:["status"],fn:function(e){return s._.contains(["ACTIVE","INACTIVE"],e)}},__editable__:{deps:["status"],fn:function(e){return s._.contains(["INACTIVE"],e)}},__deletable__:{deps:["status"],fn:function(e){return s._.contains(["INACTIVE","INVALID"],e)}},__hasLargeExcludeUsers__:{deps:["conditions.people.users.exclude"],fn:function(e){return s._.isArray(e)&&e.length>u}}},initialize:function(){this.isNew()||(this._setExpression(this.get("conditions.expression.value")),s._.isEmpty(this.get("__expressionObject__"))&&!s._.isEmpty(this.get("__expressionString__"))?this.set("__activeBuilder__","EDITOR"):this.set("__activeBuilder__","BUILDER"),this.on("sync",function(){this._setExpression(this.get("conditions.expression.value"))}))},sync:function(e,t,i){return"delete"===e&&(i.toRemoveUsers===!0&&(i.url=s._.result(this,"url")+"?removeUsers=true"),i=s._.omit(i,"toRemoveUsers")),s.Model.prototype.sync.call(this,e,t,i)},toJSON:function(){var e=void 0;return e="BUILDER"===this.get("__activeBuilder__")?o.default.convertFromObjectToString(this.get("__expressionObject__")):this.get("__expressionString__"),this.set("conditions.expression.value",e),s.Model.prototype.toJSON.apply(this,arguments)},_setExpression:function(e){this.set({__expressionString__:e,__expressionObject__:o.default.convertFromStringToObject(e)})},validate:function(){var e={};return"EDITOR"===this.get("__activeBuilder__")?s._.isEmpty(this.get("__expressionString__"))&&(e.conditions=(0,s.loc)("blank")):s._.isEmpty(o.default.convertFromObjectToString(this.get("__expressionObject__")))&&(e.conditions=(0,s.loc)("groups.rules.rule.condition.validation.error")),e}}),c=s.Collection.extend({model:l,url:a});t.default={MAX_DISPLAY_EXCLUDE_USERS:u,Model:l,Collection:c}},472:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=function(e,t){var i={},s=e(t);return s.userAttributeName&&!n._.isUndefined(s.conditionValue)&&s.matchedStr===t&&(i={left:s.userAttributeName,op:s.operator,right:s.conditionValue}),i};t.default={USER_ATTRIBUTE_CONDITION_TYPE:"USER_ATTRIBUTE",GROUP_MEMBERSHIP_CONDITION_TYPE:"GROUP_MEMBERSHIP",EXPRESSION_BUILDER_TYPE:{BUILDER:{title:(0,n.loc)("groups.rules.rule.builder.label")},EDITOR:{title:(0,n.loc)("groups.rules.rule.editor.label")}},CONDITION_TYPE:{USER_ATTRIBUTE:{title:(0,n.loc)("groups.rules.rule.condition.userAttribute.type")},GROUP_MEMBERSHIP:{title:(0,n.loc)("groups.rules.rule.condition.groupMembership.type")}},USER_ATTRIBUTE_OPERATOR:{equals:{title:(0,n.loc)("groups.rules.rule.condition.userAttribute.equals"),toObj:n._.wrap(function(e){var t=/^(user\.\w+)\s*==\s*['|"](.*?)['|"]/,i=t.exec(e);return n._.isEmpty(i)&&(i=[]),{matchedStr:i[0],userAttributeName:i[1],operator:"equals",conditionValue:i[2]}},s),toStr:function(e,t){var i=e.right||(e.right="");return i=JSON.stringify((i.match(/^['|"]*(.*)['|"]*$/)||[]).pop()||""),t?(0,n.loc)("groups.rules.rule.condition.userAttribute.equals.naturalLanguage","messages",[e.left,i]):e.left+"=="+i}},startswith:{title:(0,n.loc)("groups.rules.rule.condition.userAttribute.startsWith"),toObj:n._.wrap(function(e){var t=/^String\.startsWith\((user\.\w+),\s*['|"](.*?)['|"]\)/,i=t.exec(e);return n._.isEmpty(i)&&(i=[]),{matchedStr:i[0],userAttributeName:i[1],operator:"startswith",conditionValue:i[2]}},s),toStr:function(e,t){return t?(0,n.loc)("groups.rules.rule.condition.userAttribute.startsWith.naturalLanguage","messages",[e.left,JSON.stringify(e.right)]):"String.startsWith("+e.left+","+JSON.stringify(e.right)+")"}},stringContains:{title:(0,n.loc)("groups.rules.rule.condition.userAttribute.contains"),toObj:n._.wrap(function(e){var t=/^String\.stringContains\((user\.\w+),\s*['|"](.*?)['|"]\)/,i=t.exec(e);return n._.isEmpty(i)&&(i=[]),{matchedStr:i[0],userAttributeName:i[1],operator:"stringContains",conditionValue:i[2]}},s),toStr:function(e,t){return t?(0,n.loc)("groups.rules.rule.condition.userAttribute.contains.naturalLanguage","messages",[e.left,JSON.stringify(e.right)]):"String.stringContains("+e.left+","+JSON.stringify(e.right)+")"}}},GROUP_MEMBERSHIP_OPERATOR:{isofany:{title:(0,n.loc)("groups.rules.rule.condition.groupMembership.isOfAny"),toObj:function(e){var t={},i=/^isMemberOfAnyGroup\(\[?(["', a-zA-Z0-9]*?)\]?\)$/,s=i.exec(e);n._.isEmpty(s)&&(s=[]);var r=s[1]||"";return n._.isEmpty(r)||(r.indexOf("[")===-1&&r.indexOf("]")===-1&&(r="["+r+"]"),s=JSON.parse(r),s.length>0&&(t={fn:"isofany",arg:s})),t},toStr:function(e){return"isMemberOfAnyGroup("+JSON.stringify(e.arg).replace("[","").replace("]","")+")"}}},convertFromStringToObject:function(e){var t={};if(e=n._.isString(e)?e.trim():"",!n._.isEmpty(e)){var i=this;n._.keys(this.USER_ATTRIBUTE_OPERATOR).every(function(s){return t=i.USER_ATTRIBUTE_OPERATOR[s].toObj(e),n._.isEmpty(t)}),n._.isEmpty(t)&&n._.keys(this.GROUP_MEMBERSHIP_OPERATOR).every(function(s){return t=i.GROUP_MEMBERSHIP_OPERATOR[s].toObj(e),n._.isEmpty(t)})}return t},convertFromObjectToString:function(e,t){n._.isBoolean(t)||(t=!1);var i="";if(e=n._.isObject(e)?e:{},!n._.isEmpty(e)){var s=this.getConditionObjectType(e);switch(s){case this.USER_ATTRIBUTE_CONDITION_TYPE:i=this.USER_ATTRIBUTE_OPERATOR[e.op].toStr(e,t);break;case this.GROUP_MEMBERSHIP_CONDITION_TYPE:i=this.GROUP_MEMBERSHIP_OPERATOR[e.fn].toStr(e)}}return i},getConditionObjectType:function(e){return n._.has(e,"left")&&n._.has(e,"op")&&n._.has(e,"right")?this.USER_ATTRIBUTE_CONDITION_TYPE:n._.has(e,"fn")&&n._.has(e,"arg")?this.GROUP_MEMBERSHIP_CONDITION_TYPE:void 0},getConditionTypeOptions:function(){return this.getOptions(this.CONDITION_TYPE)},getUserAttributeOperatorOptions:function(){return this.getOptions(this.USER_ATTRIBUTE_OPERATOR)},getOptions:function(e){var t=n._.object(n._.map(e,function(e,t){var i=[];return i.push(t),i.push(e.title),i}));return t}}},473:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return{style:{classes:"qtip-custom qtip-shadow"},position:{my:"bottom right",at:"top center"},hide:{fixed:!0},show:{delay:0},content:e||""}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(2);i(26);var o=i(474),a=n(o),u=i(481),l=n(u),c=i(482),d=n(c);t.default=r.DataList.extend({columns:[{label:(0,r.loc)("groups.rules.rule"),className:"rule",attributes:function(){return{"data-se":this.model.get("name")+"-rule"}},initialize:function(){this.add(a.default)}},{label:(0,r.loc)("groups.rules.status"),className:"status-col",attributes:function(){return{"data-se":this.model.escape("name")+"-status"}},initialize:function(){this.model.get("__valid__")?this.add(l.default):this.add(d.default)}},{label:(0,r.loc)("groups.rules.actions"),className:"actions-col",initialize:function(){this.add((0,r.createButton)({icon:"edit-16",attributes:function(){return{"data-se":this.model.escape("name")+"-edit-rule"}},click:function(){this.state.trigger("editRule",this.model)},initialize:function(){this.disable(),this.listenTo(this.model,"change:__editable__",function(e,t){this.toggle(t),this.model.get("__valid__")?this.tooltip.qtip("option","content.text",(0,r.loc)("groups.rules.rule.tooltip.none.edit")):this.tooltip.qtip("option","content.text",(0,r.loc)("groups.rules.rule.tooltip.invalid.edit")),this.toggleTooltip()})},postRender:function(){this.toggle(this.model.get("__editable__")),this.model.get("__valid__")?this.tooltip=this.$el.qtip(s((0,r.loc)("groups.rules.rule.tooltip.none.edit"))):this.tooltip=this.$el.qtip(s((0,r.loc)("groups.rules.rule.tooltip.invalid.edit"))),this.toggleTooltip()},toggleTooltip:function(){this.model.get("__editable__")?this.tooltip.qtip("disable",!0):this.tooltip.qtip("enable",!0)}})),this.add((0,r.createButton)({icon:"clear-input-16",attributes:function(){return{"data-se":this.model.escape("name")+"-remove-rule"}},click:function(){this.state.trigger("removeRule",this.model)},initialize:function(){this.disable(),this.listenTo(this.model,"change:__deletable__",function(e,t){this.toggle(t),t?this.tooltip.qtip("disable",!0):this.tooltip.qtip("enable",!0)})},postRender:function(){this.tooltip=this.$el.qtip(s((0,r.loc)("groups.rules.rule.tooltip.none.delete"))),this.tooltip.qtip("disable",!0),this.isEditable()?this.enable():this.tooltip.qtip("enable",!0)},isEditable:function(){return this.model.get("__deletable__")}}))}}],toolbar:[{type:"button",icon:"add-16",title:(0,r.loc)("groups.rules.rule.add"),events:{click:function(e){e.preventDefault(),this.state.trigger("addRule")}}}],emptyState:{title:(0,r.loc)("groups.rules.empty.title"),subtitle:(0,r.loc)("groups.rules.empty.subtitle","messages",['<a href="#" data-se="add-group-rule">',"</a>"]),escape:!1,events:{'click a[data-se="add-group-rule"]':function(e){e.preventDefault(),e.stopPropagation(),this.state.trigger("addRule")}}}})},474:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(475),o=n(r),a=i(476),u=n(a),l=i(478),c=n(l),d=i(480),p=n(d),h="exclude-label";t.default=s.View.extend({className:"word-break",events:{"click .show-fewer-users a":function(e){e.preventDefault(),e.stopPropagation(),this.$(".show-fewer-users").addClass("hide"),this.model.trigger("display:moreUsersLink")}},modelEvents:{"display:fewerUsersLink":function(){this.$(".show-fewer-users").removeClass("hide")}},template:'\t      <p class="rule-name">{{name}}</p>\t      <span name="condition"></span>\t    ',initialize:function(){this.addConditionDescription(),this.add(u.default,{options:{text:(0,s.loc)("groups.rules.rule.condition.conjunction.then.label")}}),this.add('<span data-se="assign-to">{{i18n code="groups.rules.rule.assignTo"}}</span>'),this.add(c.default,{options:{ids:this.model.get("actions.assignUserToGroups.groupIds"),attributes:{"data-se":"assign-to-target"}}});var e=this.model.get("conditions.people.groups.exclude");s._.isEmpty(e)||(this.add(u.default,{options:{text:(0,s.loc)("groups.rules.rule.exclude"),extraClass:h}}),this.add(c.default,{options:{ids:e}}));var t=this.model.get("conditions.people.users.exclude");s._.isEmpty(t)||(this.add(p.default,{options:{addExcludeKeyword:!0,ids:t}}),this.model.get("__hasLargeExcludeUsers__")&&this.add('<p class="show-fewer-users hide">\t            <a href="#">{{i18n code="groups.rules.rule.showFewerUsers"}}</a></p>')),this.listenTo(this.model,"sync",this.addConditionDescription)},addConditionDescription:function(){this.condition&&this.condition.remove(),this.condition=this.add(o.default,'span[name="condition"]').last()}})},475:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(476),o=n(r),a=i(477),u=n(a),l=i(472),c=n(l),d=(0,s.tpl)('<span class="condition-desc-value">{{text}}</span>');t.default=s.View.extend({tagName:"span",initialize:function(){this.add(o.default,{options:{text:(0,s.loc)("groups.rules.rule.condition.conjunction.if.label")}});var e=this.model.get("__expressionObject__");if(s._.isEmpty(e))this.add(d({text:this.model.get("conditions.expression.value")}));else{var t=c.default.getConditionObjectType(e);t===c.default.USER_ATTRIBUTE_CONDITION_TYPE?this.add(d({text:c.default.USER_ATTRIBUTE_OPERATOR[e.op].toStr(e,!0)})):t===c.default.GROUP_MEMBERSHIP_CONDITION_TYPE&&this.add(u.default,{options:{ids:e.arg}})}}})},476:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=n(s);t.default=r.default.View.extend({tagName:"span",className:"condition-label",template:r.default.tpl("{{text}}"),text:null,postRender:function(){this.options.extraClass&&this.$el.addClass(this.options.extraClass)}})},477:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=n(s),o=i(478),a=n(o);t.default=r.default.View.extend({tagName:"span",template:r.default.tpl('\t      <span>{{i18n code="groups.rules.rule.condition.groupMembership.isOfAny.naturalLanguage"}}</span>\t    '),children:[a.default]})},478:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(479),r=n(s);t.default=r.default.extend({apiURL:"/api/v1/groups",className:"group",parse:function(e){return{name:e.profile.name,link:"/admin/group/"+e.id}}})},479:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({tagName:"ul",ids:null,apiURL:null,linkTemplate:(0,n.tpl)('<li><a href="{{link}}" target="_blank">{{name}}</a>{{separator}}</li>'),separator:",",constructor:function(e){if(e||(e={}),n.View.apply(this,arguments),!this.apiURL)throw new Error("apiURL is not provided");if(this.ids||(this.ids=e.ids),!this.ids)throw new Error("ids are not provided");n._.bindAll(this,"doRenderView","parse","fetch","buildPrefetchQuery","appendSeparator")},render:function(){n.View.prototype.render.apply(this,arguments),this.fetch().done(this.doRenderView)},doRenderView:function(e){if(n._.isArray(e)){var t=n._.chain(e).map(this.parse).map(this.appendSeparator).map(this.linkTemplate).join("").value();this.$el.html(t)}},appendSeparator:function(e,t,i){return t!==i.length-1&&(e.separator=this.separator),e},parse:n._.identity,fetch:function(){return n._.isEmpty(this.ids)?(new n.$.Deferred).resolve([]):n.$.get(this.apiURL,this.buildPrefetchQuery(this.ids))},buildPrefetchQuery:function(e){return n._.extend({},{filter:'id eq "'+e.join('" or id eq "')+'"'})}})},480:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(479),o=n(r),a=i(476),u=n(a),l=i(471),c=n(l),d=c.default.MAX_DISPLAY_EXCLUDE_USERS,p=s.internal.util.BatchAjaxUtil,h=(0,s.tpl)(['<li class="js-show-more-users">',"and ",'<a href="#" >','{{#if plural}}{{i18n code="groups.rules.rule.showOtherUsers" arguments="restUsers"}}','{{else}}{{i18n code="groups.rules.rule.showOtherUser" arguments="restUsers"}}',"{{/if}}","</a></li>"].join(""));t.default=o.default.extend({className:"exclude-users-list",attributes:{"data-se":"exclude-values"},apiURL:"/api/v1/users",linkTemplate:(0,s.tpl)('<li class="user-link {{extraClass}}"><a href="{{link}}" target="_blank">{{name}}</a>{{separator}}</li>'),events:{"click .js-show-more-users a":function(e){e.preventDefault(),e.stopPropagation(),this.doRenderView(this.__savedResponse__,!1),this.model.trigger("display:fewerUsersLink")}},modelEvents:{"display:moreUsersLink":function(){this.doRenderView(this.__savedResponse__,!0)}},parse:function(e){return{name:e.profile.firstName+" "+e.profile.lastName,link:"/admin/user/profile/view/"+e.id}},fetch:function(){var e=this.ids;return e&&e.length?p.getByIds({url:this.apiURL,batchSize:20,queryBuildFn:s._.bind(this.buildPrefetchQuery,this),ids:e}):(new s.$.Deferred).resolve([])},doRenderView:function(e,t){if(s._.isArray(e)){this.__savedResponse__=e;var i=s._.chain(e).map(this.parse).map(this.appendSeparator).value(),n=[];t!==!1&&i.length>d&&(i[d-1].separator="",s._.each(s._.drop(i,d),function(e){e.extraClass="hide"}),n=[this.getShowMoreLinkView(i.length-d)]),this.$el.html(this.createMainView(s._.map(i,this.linkTemplate),n)),this.renderExcludeKeywordView()}},getShowMoreLinkView:function(e){return h({restUsers:e,plural:e>1})},createMainView:function(e,t){var i='<li class="exclude-user-keyword-wrap"></li>',n=[].concat(this.options.addExcludeKeyword?[i]:[],s._.first(e,d),t,s._.drop(e,d));return n.join("")},renderExcludeKeywordView:function(){this.options.addExcludeKeyword&&this.add(u.default,{selector:".exclude-user-keyword-wrap",options:{text:(0,s.loc)("groups.rules.rule.exclude"),extraClass:"exclude-label"}})}})},481:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.DropDown.extend({attributes:{"data-se":"rule-status"},modelEvents:{"change:status":"render"},title:function(){return"ACTIVE"===this.model.get("status")?(0,n.loc)("groups.rules.rule.active"):(0,n.loc)("groups.rules.rule.inactive")},items:[{title:(0,n.loc)("groups.rules.rule.activate"),subtitle:(0,n.loc)("groups.rules.rule.activate.subtitle"),seleniumId:"activate-rule",icon:"activate-on-green-16",showWhen:{status:"INACTIVE"},click:function(){n.$.ajax({url:"/api/v1/groups/rules/"+this.model.get("id")+"/lifecycle/activate",type:"POST",dataType:"json"}).done(n._.bind(function(){this.model.set("status","ACTIVE")},this)).fail(n._.bind(function(){this.notify("error",(0,n.loc)("groups.rules.rule.activate.fail"))},this))}},{title:(0,n.loc)("groups.rules.rule.deactivate"),seleniumId:"deactivate-rule",icon:"deactivate-16",showWhen:{status:"ACTIVE"},click:function(){n.$.ajax({url:"/api/v1/groups/rules/"+this.model.get("id")+"/lifecycle/deactivate",type:"POST",dataType:"json"}).done(n._.bind(function(){this.model.set("status","INACTIVE")},this)).fail(n._.bind(function(){this.notify("error",(0,n.loc)("groups.rules.rule.deactivate.fail"))},this))}}]})},482:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=n(s),o=r.default.tpl('<span title="{{tooltip}}" class="invalid-rule-icon icon icon-16 icon-only error-16-red"></span>\t                      <label>{{invalid}}</label>');t.default=r.default.View.extend({attributes:{"data-se":"rule-status"},className:"invalid-rule-status",template:o({invalid:r.default.loc("groups.rules.rule.invalid.label"),tooltip:r.default.loc("groups.rules.rule.invalid.tooltip")}),postRender:function(){return this.$(".invalid-rule-icon").qtip({style:{classes:"qtip-custom qtip-shadow"},position:{my:"bottom right",at:"top center"},hide:{fixed:!0},show:{delay:0}}),this}})},483:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(484),o=n(r);t.default=s.ModalDialog.extend({params:{containerId:"group-rule-modal",focus:!1,autoResize:!1,maxHeight:650,minHeight:200,minWidth:900,maxWidth:900},initialize:function(){this.isNewRule=this.model.isNew(),this.title=this.isNewRule?(0,s.loc)("groups.rules.rule.add"):(0,s.loc)("groups.rules.rule.edit"),this.addForm()},addForm:function(){this.form&&this.form.remove(),this.form=new o.default(s._.omit(this.options,"title")),this.add(this.form),this.addFormListeners()},addFormListeners:function(){(0,s.$)(window).on("resize",s._.throttle(s._.bind(this.resize,this),50)),this.listenTo(this.form,"resize",this.resize),this.listenTo(this.form,"cancel",this.remove),this.listenTo(this.form,"save",this.saveRule)},resize:function(){var e=this.params.maxHeight,t=this.params.minHeight,i=20,n=(0,s.$)(window).height(),r=this.$(".modal-title").outerHeight(!0),o=n-i;o>e?o=e:o<t&&(o=t),this.form.resize(o-r),s.$.modal.update(o)},saveRule:function(){this.model.save({},{wait:!0}).done(s._.bind(function(){this.isNewRule?this.notify("success",(0,s.loc)("groups.rules.rule.add.success","messages",[this.model.get("name")])):this.notify("success",(0,s.loc)("groups.rules.rule.edit.success","messages",[this.model.get("name")])),this.state.trigger("updateGroupRules",this.model),this.remove()},this))}})},484:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(369),o=n(r),a=i(485),u=n(a),l=i(499),c=n(l),d=s.internal.views.forms.helpers.ErrorParser;t.default=s.Form.extend({save:function(){return(0,s.loc)(this.model.isNew()?"groups.rules.rule.add":"groups.rules.rule.save")},layout:"o-form-wrap",initialize:function(){var e=!this.model.isNew();this.previewRuleView=this.add(c.default,".o-form-error-container").last(),this.addInput({type:"text",name:"name",label:(0,s.loc)("groups.rules.rule.name"),readOnly:e}),this.addDivider(),this.addSectionTitle((0,s.loc)("groups.rules.rule.definition.title")),this.add(u.default),this.addDivider(),this.addSectionTitle((0,s.loc)("groups.rules.rule.options.title")),this.addInput({type:"userpicker",name:"conditions.people.users.exclude","label-top":this.model.get("__hasLargeExcludeUsers__"),params:{implicitSync:!0,batchSize:20},label:(0,s.loc)("groups.rules.rule.excludeUsers.label")}),s._.defer(s._.bind(this.addPreviewUserPicker,this))},addPreviewUserPicker:function(){var e={selector:".o-form-button-bar",options:{field:"__previewUserId__",placeholder:(0,s.loc)("groups.rules.rule.preview.userPicker.placeholder")}};this.previewUserPicker=this.add(o.default,e).last(),this._bindEvents()},resize:function(e){var t=this.$("."+this.layout),i=this.$(".o-form-button-bar").outerHeight(!0);s._.isNumber(e)&&t.outerHeight(e-i)},_resizeForm:function(){this.model.trigger("form:resize")},_bindEvents:function(){this.listenTo(this.model,"form:clear-errors",function(){this.previewRuleView.clearMessage()}),this.listenTo(this.previewUserPicker,"onClear",function(){this.previewRuleView.clearMessage(),this._resizeForm()}),this.listenTo(this.previewUserPicker,"onSelect",function(e){var t=this.model.toJSON(),i={type:t.conditions.expression.type,value:t.conditions.expression.value,targets:{user:e.userId}};this.clearErrors(),this.previewRuleView.previewOneRule(i).always(s._.bind(this._resizeForm,this))})},parseErrorMessage:function(e){if(e){var t=void 0;s._.each(e.errorCauses||[],function(e){var i=e&&e.errorSummary||"",n=d.parseErrorSummary(i);t||!i||n||(t=e.errorSummary)}),t&&(e.errorSummary=t)}return e}})},485:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(486),o=n(r),a=i(487),u=n(a);t.default=s.View.extend({className:"o-form-fieldset condition-container",attributes:{"data-se":"o-form-fieldset"},initialize:function(){this.add(o.default),this.add(u.default)}})},486:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(472),o=n(r),a=s.internal.views.components.BaseButtonLink,u="builder-button",l="editor-button",c="active";t.default=s.View.extend({name:"__activeBuilder__",className:"definition-toolbar clearfix",events:{"click a":function(e){e.preventDefault(),this.model.set(this.name,e.target.id===u?"BUILDER":"EDITOR")}},initialize:function(){this.builderLink=new a({id:u,title:o.default.EXPRESSION_BUILDER_TYPE.BUILDER.title}),this.editorLink=new a({id:l,title:o.default.EXPRESSION_BUILDER_TYPE.EDITOR.title}),this.add(this.builderLink),this.add(this.editorLink),this.listenTo(this.model,"change:"+this.name,this.toggleButton);
},postRender:function(){this.toggleButton()},toggleButton:function(){"EDITOR"===this.model.get(this.name)?(this.editorLink.$el.addClass(c),this.builderLink.$el.removeClass(c)):(this.editorLink.$el.removeClass(c),this.builderLink.$el.addClass(c))}})},487:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=n(s),o=i(488),a=n(o),u=i(496),l=n(u),c=i(497),d=n(c),p=i(498),h=n(p);t.default=r.default.View.extend({className:"definition-container clearfix",initialize:function(){this.add(a.default),this.add(l.default),this.add(h.default,{options:{labelClassName:"condition-error-conditions",name:["conditions","__activeBuilder__","__expressionString__","__expressionObject__"]}}),this.add(d.default,{options:{name:"actions.assignUserToGroups.groupIds",to:function(e){return[e]},readOnly:!this.model.isNew()}}),this.add(h.default,{options:{labelClassName:"condition-error-actions",name:["actions","actions.assignUserToGroups.groupIds"]}})}})},488:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=n(s),o=i(489),a=n(o),u=i(490),l=n(u),c=i(495),d=n(c),p=r.default._;t.default=a.default.extend({showWhen:{__activeBuilder__:"BUILDER"},initialize:function(){var e=new d.default.Model(this.model.get("__expressionObject__"));this.add(l.default,{options:{conjunctionLabel:r.default.loc("groups.rules.rule.condition.conjunction.if.label"),model:e}}),this.listenTo(e,"change:expressionObj",p.debounce(function(e,t){this.model.set({__expressionObject__:t})},100)),this.listenTo(e,"form:resize",function(){this.model.trigger("form:resize")})}})},489:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.internal.views.forms.helpers.FormUtil;t.default=n.View.extend({constructor:function(){n.View.apply(this,arguments),s.applyShowWhen(this,this.options.showWhen||this.showWhen)}})},490:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(491),o=n(r),a=s.internal.views.forms.inputs.TextArea;t.default=s.View.extend({className:"condition-row clearfix",template:(0,s.tpl)('\t      <span class="condition-label">\t        <span class="condition-conj">{{conjunctionLabel}}</span>\t        <span class="condition-modifier"></span>\t      </span>\t    '),initialize:function(){"EDITOR"===this.options.builderType||(this.options.builderType="BUILDER"),"BUILDER"===this.options.builderType?this.add(o.default):this.add(a,{options:{placeholder:(0,s.loc)("groups.rules.rule.editor.placeholder"),className:"expression-input",name:"__expressionString__"}})}})},491:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(492),o=n(r),a=i(494),u=n(a),l=i(472),c=n(l),d=s.internal.views.forms.inputs.Select;t.default=s.View.extend({className:"condition-container",initialize:function(){this.add(d,{options:{name:"type",className:"condition-type",options:c.default.getConditionTypeOptions()}}),this.add(o.default),this.add(u.default)}})},492:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(489),o=n(r),a=i(493),u=n(a),l=i(472),c=n(l),d=s.internal.views.forms.inputs,p=d.Select,h=d.TextBox;t.default=o.default.extend({className:"input-group",showWhen:{type:"USER_ATTRIBUTE"},initialize:function(){this.add(u.default,{options:{name:"left",className:"condition-attr-dropdown"}}),this.add(p,{options:{name:"op",className:"condition-attr-modifier",options:c.default.getUserAttributeOperatorOptions()}}),this.add(h,{options:{name:"right",type:"text",className:"condition-value",placeholder:(0,s.loc)("groups.rules.rule.condition.userAttribute.value.placeholder")}})}})},493:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.internal.views.forms.BaseInput,r="okta-user-attribute-select",o="user.",a=function(e,t){return{id:o+t,name:t,type:e.type}},u=function(e){return(0,n.tpl)('\t          <span data-se="attribute-name">{{name}}</span>\t          <span data-se="attribute-type" class="data-type">{{type}}</span>\t        ')(e)},l=function(e,t){var i=new RegExp("^"+o+"(.*)","i");return t||(t=""),t=(t.match(i)||[]).pop()||t,n._.isEmpty(t)?e:n._.filter(e,function(e){var i=new RegExp(t,"i");if(i.test(e.name))return e})},c=function(e){return n._.filter(n._.union(n._.map(e.definitions.base.properties,a),n._.map(e.definitions.custom.properties,a)),function(e){if("string"===e.type)return e})};t.default=s.extend({className:r,template:(0,n.tpl)('<input name="{{id}}" id="{{inputId}}" type="hidden"></input>'),editMode:function(){var e=this;s.prototype.editMode.apply(this,arguments),this.disable(),n.$.ajax({url:"/api/v1/meta/schemas/user/default",dataType:"json",type:"GET"}).done(function(t){var i=c(t),s=e.getModelValue(),r=e._select2(i);r.on("select2-selecting",n._.bind(e.selectEntity,e)),s&&(e._entity=l(i,s).pop(),r.select2("data",e._entity)),e.enable()}).fail(function(){e.enable()})},selectEntity:function(e){this._updateModel(e.choice)},val:function(){return this._value},_updateModel:function(e){this._entity=e,this._value=e.id,this.update()},_select2:function(e){var t={data:e,width:"200px",openOnEnter:!0,dropdownCssClass:r,formatResult:u,formatSelection:u,formatNoMatches:(0,n.loc)("oform.baseselect.noresults"),formatSearching:(0,n.loc)("oform.baseselect.searching"),placeholder:(0,n.loc)("groups.rules.rule.condition.userAttribute.name.placeholder"),query:function(e){e.callback({results:l(this.data,e.term)})}};return this.$("input").select2(t)}})},494:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(489),o=n(r),a=s.internal.views.forms.inputs.GroupPicker;t.default=o.default.extend({showWhen:{type:"GROUP_MEMBERSHIP"},template:(0,s.tpl)('\t      <span class="condition-group-modifier">{{i18n code="groups.rules.rule.condition.groupMembership.isOfAny"}}</span>\t    '),initialize:function(){this.add(a,{options:{params:{retrieveLimit:25},name:"arg",placeholder:(0,s.loc)("groups.rules.rule.condition.groupMembership.value.placeholder")}})}})},495:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=["left","op","right"],r=["fn","arg"];t.default={Model:n.Model.extend({props:{type:{type:"string",values:["USER_ATTRIBUTE","GROUP_MEMBERSHIP"],value:"USER_ATTRIBUTE"},left:"string",op:"string",right:"string",fn:"string",arg:"array"},derived:{expressionObj:{deps:["left","op","right","fn","arg"],fn:function(){var e="USER_ATTRIBUTE"===this.get("type")?s:r;return n._.pick(this.toJSON(),e)}}},initialize:function(){this.set("type",this.get("fn")?"GROUP_MEMBERSHIP":"USER_ATTRIBUTE"),this.on("change:type",function(e,t){"GROUP_MEMBERSHIP"===t?this.set("fn","isofany"):this.unset("fn")})}})}},496:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=n(s),o=i(489),a=n(o),u=i(490),l=n(u),c="EDITOR";t.default=a.default.extend({showWhen:{__activeBuilder__:c},initialize:function(){this.add(l.default,{options:{conjunctionLabel:r.default.loc("groups.rules.rule.condition.conjunction.if.label"),builderType:c}})}})},497:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.internal.views.forms.inputs.GroupSelect,r="NONE_OKTA_GROUP";t.default=s.extend({tagName:"div",className:"condition-assign-group group-select-wrap",dropdownCssClass:"group-select-drop",attributes:{"data-se":"group-rule-assign-to-group"},template:(0,n.tpl)('\t      <span class="action-label">{{i18n code="groups.rules.rule.condition.conjunction.then.label"}}</span>\t      <span class="action">{{i18n code="groups.rules.rule.assignTo"}}</span>\t      <input name="{{name}}" id="{{inputId}}" type="hidden"></input>\t    '),placeholder:(0,n.loc)("groups.rules.rule.definition.assign.placeholder"),toStringValue:function(){var e=(0,n.tpl)('\t        <span class="action-label">{{i18n code="groups.rules.rule.condition.conjunction.then.label"}}</span>\t        <span class="action">{{i18n code="groups.rules.rule.assignTo"}}</span>\t        {{#if smallIconUrl}}\t        <span class="group-small-app-logo-wrapper o-form-read-mode">\t          <img class="logo" src="{{smallIconUrl}}"/>\t        </span>\t        {{/if}}\t        <span class="assign-group-name">{{name}}</span>\t      ');return e(this._entity)},parse:function(e){return"OKTA_GROUP"===e.type?s.prototype.parse.apply(this,arguments):r},parseAll:function(){var e=n._.without(s.prototype.parseAll.apply(this,arguments),r);return e}})},498:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.internal.views.forms.helpers.InputContainer;t.default=n.View.extend({className:"condition-error",initialize:function(){this.add(new s({model:this.model,name:this.options.name,className:"o-form-input "+this.options.labelClassName}))}})},499:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),r=i(500),o=n(r),a=i(501);t.default=s.View.extend({className:"preview-user-rule",initialize:function(){this.previewRuleService=new o.default},previewOneRule:function(e){this.clearMessage();var t=s._.bind(this._handleSingleResp,this);return this.previewRuleService.previewOneRule(e).then(t,t)},clearMessage:function(){this.removeChildren()},_handleSingleResp:function(e){var t=e&&e.message?e.message:(0,s.loc)("groups.rules.rule.preview.error"),i=e&&e.messageDetails?e.messageDetails:[],n=e&&e.match?"success":"error",r={iconType:n,messageContent:t,messageDetails:i},o={model:new a.Model(r)};this.add(a.View,{options:o}),this.render()}})},500:function(e,t,i){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2);n.prototype={defaults:{operation:"CONDITION"},ajaxSettings:{url:"/api/v1/internal/expression/eval",type:"POST",contentType:"application/json"},previewOneRule:function(e){return this.preview([e]).then(function(e){return s._.first(e)})},preview:function(e){var t=s._.map(e,s._.bind(this._normalizeData,this)),i=s._.extend({},this.ajaxSettings,{data:JSON.stringify(t)});return s.$.ajax(i).then(s._.bind(this._parse,this),function(){return{match:!1,message:"API UNKNOWN ERROR"}})},_parse:function(e){return s._.map(e,this._parseSingle)},_parseSingle:function(e){var t={match:!1,message:(0,s.loc)("groups.rules.rule.preview.error")};return e?("TRUE"===e.result?(t.match=!0,t.message=(0,s.loc)("groups.rules.rule.preview.match")):"FALSE"===e.result&&(t.message=(0,s.loc)("groups.rules.rule.preview.notmatch")),e.error&&e.error.errorCauses&&(t.messageDetails=s._.map(e.error.errorCauses,function(e){return e.errorSummary})),t):t},_normalizeData:function(e){return s._.defaults({},e,this.defaults)}},t.default=n},501:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=t.Model=void 0;var n=i(2),s=n.Model.extend({props:{iconSize:{type:"number",values:[16,24],value:16},iconType:{type:"string",value:"info",values:["info","warning","success","error","tip"]},messageHeader:"string",messageContent:"string",messageDetails:"array"}}),r=n.View.extend({template:'<div class="infobox infobox-{{iconType}} icon-{{iconSize}}">\t                 <span class="icon {{iconType}}-{{iconSize}}"></span>\t                 {{#if messageHeader}}<h3 class="message-header">{{messageHeader}}</h3>{{/if}}\t                 {{#if messageContent}}<p class="message-content">{{messageContent}}</p>{{/if}}\t                 {{#if messageDetails}}\t                   <ul class="bullets message-details">\t                   {{#each messageDetails}}\t                     <li>{{this}}</li>\t                   {{/each}}\t                   </ul>\t                 {{/if}}\t               </div>',className:"callout-message"});t.Model=s,t.View=r},502:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.FormDialog.extend({params:{containerId:"delete-group-rule-modal",minWidth:400,maxWidth:600},title:(0,n.loc)("groups.rules.rule.delete"),save:(0,n.loc)("groups.rules.rule.delete"),danger:!0,initialize:function(){this.listenTo(this,"save",function(){this.options.ruleModel.destroy({wait:!0,toRemoveUsers:this.model.get("toRemoveUsers")}).done(n._.bind(function(){this.remove(),this.notify("success",(0,n.loc)("groups.rules.rule.delete.success","messages",[this.options.ruleModel.get("name")]))},this)).fail(n._.bind(function(e){this.model.trigger("error",this.model,e)},this))}),this.addInput({type:"checkbox",name:"toRemoveUsers",label:(0,n.loc)("groups.rules.rule.delete.removeUsers.label"),"label-top":!0,placeholder:(0,n.loc)("groups.rules.rule.delete.removeUsers.placeholder"),explain:(0,n.loc)("groups.rules.rule.delete.removeUsers.explain")})}})}});